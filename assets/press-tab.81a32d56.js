import{u as t,z as e,_ as s,x as l,ae as i,y as a,M as o,A as n,W as r,af as d,a3 as c,O as h,o as u,c as p,i as b,j as f,a as y,r as m,n as v,b as g,d as T,F as C,k as S,h as x,t as $,f as k,e as w,S as I}from"./index-5bc1d01b.js";import{P as _}from"./press-sticky.5977e845.js";import{t as N}from"./touch.bcbb2f5b.js";import{P,C as z}from"./relation.8b10893c.js";import{c as B}from"./parent-map.7daf54ee.js";import{S as A}from"./scroll-view.6dceddb8.js";const W={tabClass:function(t,e){const s=["tab-class"];return t&&s.push("tab-active-class"),e&&s.push("press-ellipsis"),s.join(" ")},tabStyle:function(e){const s=e.active?e.titleActiveColor:e.titleInactiveColor,l=e.scrollable&&e.ellipsis;return"card"===e.type?t({"border-color":e.color,"background-color":!e.disabled&&e.active?e.color:null,color:s||(e.disabled||e.active?null:e.color),"flex-basis":l?88/e.swipeThreshold+"%":null}):t({color:s,"flex-basis":l?88/e.swipeThreshold+"%":null})},trackStyle:function(e){return e.animated?t({left:-100*e.currentIndex+"%","transition-duration":`${e.duration}s`,"-webkit-transition-duration":`${e.duration}s`}):""},lineStyle:function(s){const l=e.addUnit(s.lineWidth);return t({width:l,transform:`translateX(${s.lineOffsetLeft}px)`,"-webkit-transform":`translateX(${s.lineOffsetLeft}px)`,"background-color":s.color,height:-1!==s.lineHeight?e.addUnit(s.lineHeight):null,"border-radius":-1!==s.lineHeight?e.addUnit(s.lineHeight):null,"transition-duration":s.skipTransition?null:`${s.duration}s`,"-webkit-transition-duration":s.skipTransition?null:`${s.duration}s`})},navStyle:function(e,s){return t({"border-color":"card"===s&&e?e:null})}};const j=s({name:"PressTabs",options:{...l,styleIsolation:"shared"},components:{PressInfo:i,PressSticky:_},mixins:[N,P(B),A],props:{...a,navClass:{type:String,default:""},tabClass:{type:String,default:""},tabActiveClass:{type:String,default:""},lineClass:{type:String,default:""},sticky:{type:Boolean,default:!1},border:{type:Boolean,default:!1},swipeable:{type:Boolean,default:!1},titleActiveColor:{type:String,default:""},titleInactiveColor:{type:String,default:""},color:{type:String,default:""},animated:{type:Boolean,default:!1},lineWidth:{type:[Number,String,null],default:40},lineHeight:{type:[Number,String,null],default:-1},active:{type:[Number,String,null],default:0},type:{type:String,default:"line"},ellipsis:{type:Boolean,default:!0},duration:{type:Number,default:.3},zIndex:{type:Number,default:1},swipeThreshold:{type:Number,default:5},offsetTop:{type:Number,default:0},lazyRender:{type:Boolean,default:!0},extraClassPrefix:{type:String,default:""},mode:{type:String,default:""},useTitleSlot:{type:Boolean,default:!1},scrollViewProps:{type:Object,default:()=>({upperThreshold:50,lowerThreshold:50})}},emits:["scroll","disabled","click","input","change","scrolltoupper","scrolltolower","scrollViewScroll"],data:()=>({tabs:[],scrollLeft:0,scrollable:!1,currentIndex:0,container:null,skipTransition:!0,scrollWithAnimation:!1,lineOffsetLeft:0,computed:W,utils:e}),computed:{tabsClass(){const{type:t,customClass:e,mode:s}=this,l="hor"===s,i="e-sport"===s;return`${this.bem3("tabs",[t,{hor:l,"e-sport":i}])} ${e}`},tabsWrapClass(){const{scrollable:t,type:e,border:s}=this;return`${this.bem3("tabs__wrap",{scrollable:t})} ${"line"===e&&s?this.bem3("hairline--top-bottom"):""}`},tabScrollClass(){const{type:t}=this;return this.bem3("tabs__scroll",[t])},theNavClass(){const{type:t,ellipsis:e,navClass:s}=this,l=`${s} nav-class`;return`${this.bem3("tabs__nav",[t,{complete:!e}])} ${l}`},navStyle(){const{color:t,type:e}=this;return W.navStyle(t,e)},lineStyle(){const{color:t,lineOffsetLeft:e,lineHeight:s,skipTransition:l,duration:i,lineWidth:a}=this;return W.lineStyle({color:t,lineOffsetLeft:e,lineHeight:s,skipTransition:l,duration:i,lineWidth:a})},trackClass(){const{animated:t}=this;return`${this.bem3("tabs__track",[{animated:t}])}`},trackStyle(){const{duration:t,currentIndex:e,animated:s}=this;return W.trackStyle({duration:t,currentIndex:e,animated:s})},realEllipsis(){return this.scrollable&&this.ellipsis}},watch:{animated:{handler(){this.children.forEach(((t,e)=>t.updateRender(e===this.currentIndex,this)))}},lineWidth:{handler(){this.resize()}},active:{handler(t){t!==this.getCurrentName()&&this.setCurrentIndexByName(t)}},swipeThreshold:{handler(t){this.setData({scrollable:this.children.length>t||!this.ellipsis})}}},created(){this.children=[]},mounted(){o((()=>{this.swiping=!0,this.container=()=>this.$refs.pressTabs,this.updateTabs(),this.resize(),this.scrollIntoView()})),n((()=>{this.resize()}))},methods:{bem3(t,s){return e.bem3(t,s,this.extraClassPrefix)},getTabClass(t,e){const{currentIndex:s,ellipsis:l,tabClass:i,tabActiveClass:a}=this,o=`${a} tab-active-class`,n=`${i} tab-class`;return`${this.bem3("tab",{active:e===s,disabled:t.disabled||!1,complete:!l})} ${this.bem3("ellipsis")} ${n} ${e===s?o:""}`},getSlotTabClass(t){return this.getTabClass(this.tabs[t]||{},t)},getTabStyle(e,s){const{type:l,color:i,active:a,currentIndex:o,realEllipsis:n,titleActiveColor:r,titleInactiveColor:d,swipeThreshold:c}=this,h=n?88/c+"%":null;return t("card"===l?{borderColor:i,backgroundColor:!e.disabled&&a?i:null,color:(s===o?r:d)||(e.disabled||a?null:i),flexBasis:h}:{color:s===o?r:d,flexBasis:h})},setData(t){Object.keys(t).forEach((e=>{this[e]=t[e]}))},updateTabs(){const{children:t=[]}=this;this.tabs=t.map((t=>({title:t.title,index:t.index,disabled:t.disabled,info:t.info,dot:t.dot,titleStyle:t.titleStyle}))),this.scrollable=t.length>this.swipeThreshold||!this.ellipsis,this.setCurrentIndexByName(this.active||this.getCurrentName())},trigger(t,e){const{currentIndex:s}=this,l=e||this.children[s];r(l)&&this.$emit(t,{index:l.index,name:l.getComputedName(),title:l.title})},onTap(t){const e=+t.currentTarget.dataset.index,s=this.children[e];s.disabled?this.trigger("disabled",s):(this.setCurrentIndex(e),n((()=>{this.trigger("click")})))},setCurrentIndexByName(t){const{children:e=[]}=this,s=e.filter((e=>e.getComputedName()===t));s.length&&this.setCurrentIndex(s[0].index)},setCurrentIndex(t){const{children:e=[]}=this;if(!r(t)||t>=e.length||t<0)return;if(d(this,(()=>{e.forEach(((e,s)=>{const l=s===t;l===e.active&&e.initialled||e.updateRender(l,this)}))})),t===this.currentIndex)return;const s=null!==this.currentIndex;this.setData({currentIndex:t}),o((()=>{this.resize(),this.scrollIntoView()})),n((()=>{this.trigger("input"),s&&this.trigger("change")}))},getCurrentName(){const t=this.children[this.currentIndex];if(t)return t.getComputedName()},resize(){if("line"!==this.type)return;const{currentIndex:t,ellipsis:e,skipTransition:s}=this;Promise.all([c(this,".press-tab"),h(this,".press-tabs__line")]).then((([l=[],i])=>{const a=l[t];if(null==a)return;let o=l.slice(0,t).reduce(((t,e)=>t+e.width),0);o+=(a.width-i.width)/2+(e?0:8),this.setData({lineOffsetLeft:o}),this.swiping=!0,s&&n((()=>{this.setData({skipTransition:!1})}))})).catch((t=>{console.log("err",t)}))},scrollIntoView(){const{currentIndex:t,scrollable:e,scrollWithAnimation:s}=this;e&&Promise.all([c(this,".press-tab"),h(this,".press-tabs__nav")]).then((([e,l])=>{const i=e[t],a=e.slice(0,t).reduce(((t,e)=>t+e.width),0);this.setData({scrollLeft:a-(l.width-i.width)/2}),s||n((()=>{this.setData({scrollWithAnimation:!0})}))})).catch((t=>{console.log("error",t)}))},onTouchScroll(t){this.$emit("scroll",t)},onTouchStart(t){this.swipeable&&(this.swiping=!0,this.touchStart(t))},onTouchMove(t){this.swipeable&&this.swiping&&this.touchMove(t)},onTouchEnd(){if(!this.swipeable||!this.swiping)return;const{direction:t,deltaX:e,offsetX:s}=this;if("horizontal"===t&&s>=50){const t=this.getAvailableTab(e);-1!==t&&this.setCurrentIndex(t)}this.swiping=!1},getAvailableTab(t){const{tabs:e,currentIndex:s}=this,l=t>0?-1:1;for(let i=l;s+i<e.length&&s+i>=0;i+=l){const t=s+i;if(t>=0&&t<e.length&&e[t]&&!e[t].disabled)return t}return-1},getTabKey:(t,e)=>`${t.title||""} - ${e} -${t.index}`,scrolltoupper(t){this.$emit("scrolltoupper",t)},scrolltolower(t){this.$emit("scrolltolower",t)},scroll(t){this.$emit("scrollViewScroll",t)}}},[["render",function(t,e,s,l,i,a){const o=w("PressInfo"),n=I,r=w("PressSticky");return u(),p("div",{ref:"pressTabs",class:v(a.tabsClass)},[b(r,{disabled:!s.sticky,"z-index":s.zIndex,"offset-top":s.offsetTop,container:i.container,onScroll:a.onTouchScroll},{default:f((()=>[y("div",{class:v(a.tabsWrapClass)},[m(t.$slots,"nav-left",{},void 0,!0),b(n,{"scroll-x":i.scrollable,"scroll-with-animation":i.scrollWithAnimation,"scroll-left":i.scrollLeft,class:v(a.tabScrollClass),style:g(s.color?"border-color: "+s.color:""),"upper-threshold":s.scrollViewProps.upperThreshold,"lower-threshold":s.scrollViewProps.lowerThreshold,onScrolltoupper:a.scrolltoupper,onScrolltolower:a.scrolltolower,onScroll:t.scrollViewScroll},{default:f((()=>[y("div",{class:v(a.theNavClass),style:g(a.navStyle)},["line"===s.type?(u(),p("div",{key:0,class:v([`${a.bem3("tabs__line")} ${s.lineClass}`]),style:g(a.lineStyle)},null,6)):T("v-if",!0),s.useTitleSlot?(u(),p(C,{key:1},[i.tabs.length>0?(u(),p("div",{key:0,class:v([`${a.getSlotTabClass(0)}`]),"data-index":0,onClick:e[0]||(e[0]=(...t)=>a.onTap&&a.onTap(...t))},[m(t.$slots,"title-0",{},void 0,!0)],2)):T("v-if",!0),i.tabs.length>1?(u(),p("div",{key:1,class:v([`${a.getSlotTabClass(1)}`]),"data-index":1,onClick:e[1]||(e[1]=(...t)=>a.onTap&&a.onTap(...t))},[m(t.$slots,"title-1",{},void 0,!0)],2)):T("v-if",!0),i.tabs.length>2?(u(),p("div",{key:2,class:v([`${a.getSlotTabClass(2)}`]),"data-index":2,onClick:e[2]||(e[2]=(...t)=>a.onTap&&a.onTap(...t))},[m(t.$slots,"title-2",{},void 0,!0)],2)):T("v-if",!0),i.tabs.length>3?(u(),p("div",{key:3,class:v([`${a.getSlotTabClass(3)}`]),"data-index":3,onClick:e[3]||(e[3]=(...t)=>a.onTap&&a.onTap(...t))},[m(t.$slots,"title-3",{},void 0,!0)],2)):T("v-if",!0),i.tabs.length>4?(u(),p("div",{key:4,class:v([`${a.getSlotTabClass(4)}`]),"data-index":4,onClick:e[4]||(e[4]=(...t)=>a.onTap&&a.onTap(...t))},[m(t.$slots,"title-4",{},void 0,!0)],2)):T("v-if",!0),i.tabs.length>5?(u(),p("div",{key:5,class:v([`${a.getSlotTabClass(5)}`]),"data-index":5,onClick:e[5]||(e[5]=(...t)=>a.onTap&&a.onTap(...t))},[m(t.$slots,"title-5",{},void 0,!0)],2)):T("v-if",!0),i.tabs.length>6?(u(),p("div",{key:6,class:v([`${a.getSlotTabClass(6)}`]),"data-index":6,onClick:e[6]||(e[6]=(...t)=>a.onTap&&a.onTap(...t))},[m(t.$slots,"title-6",{},void 0,!0)],2)):T("v-if",!0),i.tabs.length>7?(u(),p("div",{key:7,class:v([`${a.getSlotTabClass(7)}`]),"data-index":7,onClick:e[7]||(e[7]=(...t)=>a.onTap&&a.onTap(...t))},[m(t.$slots,"title-7",{},void 0,!0)],2)):T("v-if",!0),i.tabs.length>8?(u(),p("div",{key:8,class:v([`${a.getSlotTabClass(8)}`]),"data-index":8,onClick:e[8]||(e[8]=(...t)=>a.onTap&&a.onTap(...t))},[m(t.$slots,"title-8",{},void 0,!0)],2)):T("v-if",!0),i.tabs.length>9?(u(),p("div",{key:9,class:v([`${a.getSlotTabClass(9)}`]),"data-index":9,onClick:e[9]||(e[9]=(...t)=>a.onTap&&a.onTap(...t))},[m(t.$slots,"title-9",{},void 0,!0)],2)):T("v-if",!0),i.tabs.length>10?(u(),p("div",{key:10,class:v([`${a.getSlotTabClass(10)}`]),"data-index":10,onClick:e[10]||(e[10]=(...t)=>a.onTap&&a.onTap(...t))},[m(t.$slots,"title-10",{},void 0,!0)],2)):T("v-if",!0)],64)):(u(!0),p(C,{key:2},S(i.tabs,((t,l)=>(u(),p("div",{key:a.getTabKey(t,l),"data-index":l,class:v([`${a.getTabClass(t,l)}`]),style:g([`${a.getTabStyle(t,l)}`]),onClick:e[11]||(e[11]=(...t)=>a.onTap&&a.onTap(...t))},[y("div",{class:v([`${a.bem3("tab__text")}`,s.ellipsis?"press-ellipsis":""]),style:g(t.titleStyle)},[x($(t.title)+" ",1),null!==t.info||t.dot?(u(),k(o,{key:0,info:t.info,dot:t.dot,"custom-class":"press-tab__title__info"},null,8,["info","dot"])):T("v-if",!0)],6)],14,["data-index"])))),128))],6)])),_:3},8,["scroll-x","scroll-with-animation","scroll-left","class","style","upper-threshold","lower-threshold","onScrolltoupper","onScrolltolower","onScroll"]),m(t.$slots,"nav-right",{},void 0,!0)],2)])),_:3},8,["disabled","z-index","offset-top","container","onScroll"]),y("div",{class:v([`${a.bem3("tabs__content")}`]),onTouchstart:e[12]||(e[12]=(...t)=>a.onTouchStart&&a.onTouchStart(...t)),onTouchmove:e[13]||(e[13]=(...t)=>a.onTouchMove&&a.onTouchMove(...t)),onTouchend:e[14]||(e[14]=(...t)=>a.onTouchEnd&&a.onTouchEnd(...t)),onTouchcancel:e[15]||(e[15]=(...t)=>a.onTouchEnd&&a.onTouchEnd(...t))},[y("div",{class:v(a.trackClass),style:g(a.trackStyle)},[m(t.$slots,"default",{},void 0,!0)],6)],34)],2)}],["__scopeId","data-v-d7ef8b3d"]]);const E=s({name:"PressTab",mixins:[z(B)],options:{...l,styleIsolation:"shared"},props:{...a,dot:{type:Boolean,default:!1},info:{type:[String,Number,null],default:""},title:{type:[String,Number,null],default:""},disabled:{type:Boolean,default:!1},titleStyle:{type:String,default:""},name:{type:[String,Number,null],default:""},extraClassPrefix:{type:String,default:""},sortIndex:{type:Number,default:0}},emits:[],data:()=>({active:!1,shouldShow:!1,shouldRender:!1,initialled:!1,utils:e}),computed:{tabClass(){const{active:t,customClass:e=""}=this;return`${this.bem3("tab__pane",{active:t,inactive:!t})} ${e}`}},watch:{dot:{handler(){this.update()}},info:{handler(){this.update()}},title:{handler(){this.update()}},disabled:{handler(){this.update()}},titleStyle:{handler(){this.update()}}},created(){},mounted(){this.update()},methods:{bem3(t,s){return e.bem3(t,s,this.extraClassPrefix)},getComputedName(){return""!==this.name?this.name:this.index},updateRender(t,e){this.initialled=this.initialled||t,this.active=t,this.shouldRender=this.initialled||!e.lazyRender,this.shouldShow=t||e.animated},update(){this[B]&&(this[B].updateTabs(),o((()=>{this[B].resize()})))},destroyCallback(){this[B].updateTabs(),n((()=>{this[B].resize()}))}}},[["render",function(t,e,s,l,i,a){return u(),p("div",{class:v([a.bem3("tab__pane-wrapper")])},[y("div",{class:v(a.tabClass),style:g(i.shouldShow?"":"display: none;")},[i.shouldRender?m(t.$slots,"default",{key:0},void 0,!0):T("v-if",!0)],6)],2)}],["__scopeId","data-v-2220c1d4"]]);export{j as P,E as a};
