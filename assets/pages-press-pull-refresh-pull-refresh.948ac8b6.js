import{s as t}from"./style.0f94ff97.js";import{d as s,e}from"./rect.8d61e06e.js";import{P as i}from"./press-loading-plus.6ff974e3.js";import{t as o}from"./index.f68c0fc5.js";import{v as a}from"./add-unit.9de8b2f7.js";import{_ as n,o as l,c as u,i as c,j as h,r,v as d,t as p,h as m,w as f,f as g,e as T}from"./index-66fd861e.js";import{a as S,P as y}from"./press-tab.b67835e5.js";import"./utils.d8f13396.js";import"./version.0d1ce575.js";import"./press-component.573dfcec.js";import"./press-info.8563e54c.js";import"./press-sticky.5fc3d7e8.js";import"./bind-event.62c2fb05.js";import"./event.b5c3f8af.js";import"./support-passive.bc409298.js";import"./touch.bcbb2f5b.js";import"./relation.8b10893c.js";import"./parent-map.b443f4cc.js";const v=["pulling","loosing","success"];const b=n({i18n:{"zh-CN":{try:"下拉试试",text:"刷新次数",success:"刷新成功",successTip:"成功提示",customTips:"自定义提示"},"en-US":{try:"Try it down",text:"Refresh Count",success:"Refresh success",successTip:"Success Tip",customTips:"Custom Tips"}},components:{PressPullRefresh:n({name:"PressPullRefresh",options:{styleIsolation:"shared"},components:{PressLoadingPlus:i},mixins:[{data:()=>({direction:""}),methods:{touchStart(t){this.resetTouchStatus(),this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY},touchMove(t){const s=t.touches[0];this.deltaX=s.clientX<0?0:s.clientX-this.startX,this.deltaY=s.clientY-this.startY,this.offsetX=Math.abs(this.deltaX),this.offsetY=Math.abs(this.deltaY);var e,i;(!this.direction||this.offsetX<10&&this.offsetY<10)&&(this.direction=(e=this.offsetX,i=this.offsetY,e>i?"horizontal":i>e?"vertical":""))},resetTouchStatus(){this.direction="",this.deltaX=0,this.deltaY=0,this.offsetX=0,this.offsetY=0}}},a],props:{disabled:Boolean,successText:{type:String,default:""},pullingText:{type:String,default:""},loosingText:{type:String,default:""},loadingText:{type:String,default:""},pullDistance:{type:[Number,String],default:""},successDuration:{type:[Number,String],default:500},animationDuration:{type:[Number,String],default:300},headHeight:{type:[Number,String],default:50},trackStyle:{type:String,default:""},customStyle:{type:String,default:""}},emits:["change","update:modelValue"],data:()=>({status:"normal",distance:0,duration:0,TEXT_STATUS:v}),computed:{statusText(){const{status:t}=this;return this[`${t}Text`]||o(t)},touchable(){return"loading"!==this.status&&"success"!==this.status&&!this.disabled},innerTrackStyle(){return t([{transitionDuration:`${this.duration}ms`,transform:this.distance?`translate3d(0,${this.distance}px, 0)`:""},this.trackStyle])},headStyle(){return 50!==this.headHeight?t({height:`${this.headHeight}px`}):""}},watch:{realModelValue(t){this.duration=this.animationDuration,t?this.setStatus(+this.headHeight,!0):this.successText?this.showSuccessTip():this.setStatus(0,!1)}},mounted(){this.scrollEl=s(this.$el)},methods:{checkPullStart(t){this.ceiling=!0,this.ceiling=0===e(this.scrollEl),this.ceiling&&(this.duration=0,this.touchStart(t))},onTouchStart(t){this.touchable&&this.checkPullStart(t)},onTouchMove(t){this.touchable&&(this.ceiling||this.checkPullStart(t),this.touchMove(t),this.ceiling&&this.deltaY>=0&&"vertical"===this.direction&&(!function(t){("boolean"!=typeof t.cancelable||t.cancelable)&&t.preventDefault()}(t),this.setStatus(this.ease(this.deltaY))))},onTouchEnd(){this.touchable&&this.ceiling&&this.deltaY&&(this.duration=this.animationDuration,"loosing"===this.status?(this.setStatus(+this.headHeight,!0),this.emitModelValue(!0),this.$emit("change",!0),this.$nextTick((()=>{this.$emit("refresh")}))):this.setStatus(0))},ease(t){const s=+(this.pullDistance||this.headHeight);return t>s&&(t=t<2*s?s+(t-s)/2:1.5*s+(t-2*s)/4),Math.round(t)},setStatus(t,s){let e;e=s?"loading":0===t?"normal":t<(this.pullDistance||this.headHeight)?"pulling":"loosing",this.distance=t,e!==this.status&&(this.status=e)},showSuccessTip(){this.status="success",setTimeout((()=>{this.setStatus(0)}),this.successDuration)}}},[["render",function(t,s,e,i,o,a){const n=T("PressLoadingPlus");return l(),u("div",{class:"press-pull-refresh",style:h(e.customStyle)},[c("div",{ref:"track",class:"press-pull-refresh__track",style:h(a.innerTrackStyle),onTouchstart:s[0]||(s[0]=(...t)=>a.onTouchStart&&a.onTouchStart(...t)),onTouchmove:s[1]||(s[1]=(...t)=>a.onTouchMove&&a.onTouchMove(...t)),onTouchend:s[2]||(s[2]=(...t)=>a.onTouchEnd&&a.onTouchEnd(...t)),onTouchcancel:s[3]||(s[3]=(...t)=>a.onTouchEnd&&a.onTouchEnd(...t))},[c("div",{class:"press-pull-refresh__head",style:h(a.headStyle)},["pulling"===o.status?r(t.$slots,"pulling",{key:0,distance:o.distance},(()=>[d(p(e.pullingText),1)]),!0):"loosing"===o.status?r(t.$slots,"loosing",{key:1},(()=>[d(p(e.loosingText),1)]),!0):"success"===o.status?r(t.$slots,"success",{key:2},(()=>[d(p(e.successText),1)]),!0):"normal"===o.status?r(t.$slots,"normal",{key:3},void 0,!0):"loading"===o.status?r(t.$slots,"loading",{key:4},(()=>[m(n,{size:"16"},{default:f((()=>[d(p(a.statusText),1)])),_:1})]),!0):g("v-if",!0)],4),r(t.$slots,"default",{},void 0,!0)],36)],4)}],["__scopeId","data-v-85f9a7a6"]]),PressTab:S,PressTabs:y},data:()=>({count:0,isLoading:!1,active:0}),computed:{tips(){return this.count?`${this.t("text")}: ${this.count}`:this.t("try")}},methods:{onRefresh(){setTimeout((()=>{this.onGTip("刷新成功"),this.isLoading=!1,this.count+=1}),1e3)},onChange(t){console.log("value",t)}}},[["render",function(t,s,e,i,o,a){const n=T("PressPullRefresh"),r=T("press-tab"),d=T("press-tabs");return l(),u("div",{class:"demo-wrap demo-pull-refresh"},[m(d,{active:o.active,onChange:a.onChange},{default:f((()=>[m(r,{title:t.t("basicUsage")},{default:f((()=>[m(n,{modelValue:o.isLoading,"onUpdate:modelValue":s[0]||(s[0]=t=>o.isLoading=t),onRefresh:a.onRefresh},{default:f((()=>[c("p",{class:"demo-button"},p(a.tips),1)])),_:1},8,["modelValue","onRefresh"])])),_:1},8,["title"]),m(r,{title:t.t("successTip")},{default:f((()=>[m(n,{modelValue:o.isLoading,"onUpdate:modelValue":s[1]||(s[1]=t=>o.isLoading=t),"success-text":t.t("success"),onRefresh:s[2]||(s[2]=t=>a.onRefresh(!1))},{default:f((()=>[c("p",{class:"demo-button"},p(a.tips),1)])),_:1},8,["modelValue","success-text"])])),_:1},8,["title"]),m(r,{title:t.t("customTips")},{default:f((()=>[m(n,{modelValue:o.isLoading,"onUpdate:modelValue":s[3]||(s[3]=t=>o.isLoading=t),"head-height":"80",onRefresh:s[4]||(s[4]=t=>a.onRefresh(!0))},{pulling:f((({distance:t})=>[c("img",{class:"doge",src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2024/7/own_mike_9ebf38f1fc4354df84.png",style:h({transform:`scale(${t/80})`})},null,4)])),loosing:f((()=>[c("img",{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2024/7/own_mike_9ebf38f1fc4354df84.png",class:"doge"})])),loading:f((()=>[c("img",{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2024/7/own_mike_aecbd81ffaca64b6f4.jpg",class:"doge"})])),default:f((()=>[c("p",{class:"demo-button"},p(a.tips),1)])),_:1},8,["modelValue"])])),_:1},8,["title"])])),_:1},8,["active","onChange"])])}],["__scopeId","data-v-21aa0e87"]]);export{b as default};
