import{P as e}from"./press-field.b4938be3.js";import{P as o}from"./press-code-input.a248ab8c.js";import{_ as a,o as t,c as n,i as l,q as s,w as r,v as i,t as c,f as d,n as m,p as u,F as h,h as b,x as p,y as k,e as C}from"./index-bbcb8c26.js";import{P as f}from"./press-popup-plus.332cb1ea.js";import{d as y,a as w}from"./press-component.c6e26072.js";import{u as g}from"./utils.3291d63f.js";import{v}from"./adapter.23c657c0.js";import{t as _}from"./index.bf006467.js";import"./press-cell.2872b1c1.js";import"./press-icon-plus.f9955b20.js";import"./style.0f94ff97.js";import"./add-unit.f0f246b9.js";import"./press-info.3c53b89c.js";import"./link.fbb0dc5b.js";import"./event.76065334.js";import"./support-passive.bc409298.js";import"./parent.59fa8a22.js";import"./test.b328066d.js";import"./press-overlay.3de7bee1.js";import"./press-transition.7dfbabee.js";import"./version.9b9e417d.js";const B=a({i18n:{"zh-CN":{number:"数字键盘",accounting:"带小数点的数字键盘",card:"身份证键盘",custom:"自定义",withToolbar:"展示顶部栏",withTitle:"展示标题",decimalMark:"自定义小数点",random:"打乱顺序",bindValue:"配合输入框使用",bindLabel:"双向绑定",input:"点此输入",codeValue:"配合验证码输入使用"},"en-US":{number:"Number Keyboard",accounting:"Number Keyboard with Decimal Mark",card:"Identity Number Keyboard",custom:"Custom",withToolbar:"Show Toolbar",withTitle:"Show Title",decimalMark:"Custom Separator Mark",random:"Randomized",bindValue:"Use with Field",bindLabel:"Bind Value",input:"Click to Input",codeValue:"Use with CodeInput"}},components:{PressField:e,PressCodeInput:o,PressNumberKeyboard:a({name:"PressNumberKeyboard",options:{...y,styleIsolation:"shared"},components:{PressPopup:f,DeleteIcon:a({name:"DeleteIcon"},[["render",function(e,o,a,s,r,i){return t(),n("svg",{class:"press-number-keyboard__delete-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 22"},[l("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"})])}],["__scopeId","data-v-0a47717b"]])},mixins:[v],props:{...w,mode:{type:String,default:"number"},show:{type:Boolean,default:!1},toolbar:{type:Boolean,default:!1},cancelButtonText:{type:String,default:""},confirmButtonText:{type:String,default:_("confirm")},title:{type:String,default:""},decimalMark:{type:String,default:"."},random:{type:Boolean,default:!1},maxLength:{type:Number,default:-1},zIndex:{type:Number,default:100},round:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!0}},emits:["change","backspace","close","cancel","confirm","update:modelValue"],data:()=>({timer:null,refreshKeyOrder:1}),computed:{roundComputed(){return this.round||this.toolbar},keys(){let e;switch(this.mode){case"number":e=[1,2,3,4,5,6,7,8,9,0];break;case"accounting":e=[1,2,3,4,5,6,7,8,9,0,this.decimalMark];break;case"card":e=[1,2,3,4,5,6,7,8,9,"X",0];break;default:e=[]}return this.refreshKeyOrder,this.random&&(e=this.shuffleArray(e)),e},wrapClass(){return g.bem2("number-keyboard",{safe:this.safeAreaInsetBottom})},padClass(){return g.bem2("number-keyboard__pad",this.mode)}},watch:{show(e){this.random&&e&&(this.refreshKeyOrder=1===this.refreshKeyOrder?2:1)}},mounted(){},beforeDestroy(){},methods:{shuffleArray(e){const o=e;for(let a=o.length-1;a>0;a--){const e=Math.floor(Math.random()*(a+1)),t=o[a];o[a]=o[e],o[e]=t}return o},getButtonClass(e,o){const a=[e];switch(this.mode){case"number":o===this.keys.length-1&&a.push("wide");break;case"accounting":["backspace","confirm"].includes(e)?a.push("place-right"):o===this.keys.length-2&&a.push("wide")}return g.bem2("number-keyboard__button",a)},onKeyboardClick(e){this.maxLength>=0&&this.realModelValue.length>=this.maxLength||(this.emitModelValue(this.realModelValue+e),this.$emit("change",e))},onBackspaceStart(){this.onBackspaceEnd(),this.onBackspaceClick(),this.timer=setInterval((()=>{this.onBackspaceClick()}),250)},onBackspaceEnd(){clearInterval(this.timer),this.timer=null},onBackspaceClick(){this.$emit("backspace"),this.emitModelValue(this.realModelValue.slice(0,this.realModelValue.length-1))},onClose(){this.$emit("close")},onActionClick(e){const{action:o}=e.currentTarget.dataset;this.$emit(o)}}},[["render",function(e,o,a,f,y,w){const g=k,v=C("delete-icon"),_=C("press-popup");return t(),s(_,{show:a.show,"z-index":a.zIndex,position:"bottom",round:w.roundComputed,"overlay-style":"background-color: transparent;","safe-area-inset-bottom":!1,onClose:w.onClose},{default:r((()=>[l("div",{class:m(w.wrapClass)},[a.toolbar?(t(),n("div",{key:0,class:"press-number-keyboard__toolbar"},[a.cancelButtonText?(t(),s(g,{key:0,class:"press-number-keyboard__cancel","hover-class":"press-number-keyboard__cancel--hover","data-action":"cancel",onClick:w.onActionClick},{default:r((()=>[i(c(a.cancelButtonText),1)])),_:1},8,["onClick"])):d("v-if",!0),l("div",{class:"press-number-keyboard__title"},c(a.title),1),a.confirmButtonText?(t(),s(g,{key:1,class:"press-number-keyboard__confirm","hover-class":"press-number-keyboard__confirm--hover","data-action":"confirm",onClick:w.onActionClick},{default:r((()=>[i(c(a.confirmButtonText),1)])),_:1},8,["onClick"])):d("v-if",!0)])):d("v-if",!0),l("div",{class:m(w.padClass)},[(t(!0),n(h,null,u(w.keys,((e,o)=>(t(),s(g,{key:e,class:m(w.getButtonClass(e,o)),"hover-class":"press-number-keyboard__button--hover",onClick:o=>w.onKeyboardClick(e)},{default:r((()=>[i(c(e),1)])),_:2},1032,["class","onClick"])))),128)),d(" 去掉 .prevent 否则非 uni-app 下无法触发 active 状态，即没有灰色背景 "),b(g,{class:m(w.getButtonClass("backspace")),"hover-class":"press-number-keyboard__button--hover",onTouchstart:p(w.onBackspaceStart,["stop"]),onTouchend:w.onBackspaceEnd},{default:r((()=>[b(v,{class:"press-number-keyboard__delete-icon"})])),_:1},8,["class","onTouchstart","onTouchend"]),"accounting"===a.mode?(t(),s(g,{key:0,class:m(w.getButtonClass("confirm")),"hover-class":"press-number-keyboard__button--confirm-hover","data-action":"confirm",onClick:w.onActionClick},{default:r((()=>[i(c(a.confirmButtonText),1)])),_:1},8,["class","onClick"])):d("v-if",!0)],2)],2)])),_:1},8,["show","z-index","round","onClose"])}],["__scopeId","data-v-5d86be71"]])},data:()=>({mode:"number",show:!1,showBindDemo:!1,showCodeDemo:!1,toolbar:!1,title:"",decimalMark:".",random:!1,bindValue:"",codeValue:""}),methods:{onShowKeyboard(e){let o="number",a=!0,t=!1,n=!1,l=!1,s="",r=".",i=!1;switch(e){case"number":break;case"accounting":o="accounting";break;case"card":o="card";break;case"toolbar":l=!0;break;case"title":l=!0,s="数字键盘";break;case"decimalMark":o="accounting",r=",";break;case"random":i=!0;break;case"bindValue":a=!1,t=!0;break;case"codeValue":a=!1,n=!0}this.mode=o,this.show=a,this.showBindDemo=t,this.showCodeDemo=n,this.toolbar=l,this.title=s,this.decimalMark=r,this.random=i},onChange(e){console.log(`[onChange] ${e}`),this.onGTip(`${e}`)},onBackspace(){console.log("[onBackspace]"),this.onGTip("backspace")},onClose(){console.log("[onClose]"),this.show=!1},onCancel(){console.log("[onCancel]"),this.show=!1},onConfirm(){console.log("[onConfirm]"),this.show=!1},onCloseBindDemo(){this.showBindDemo=!1},onCloseCodeDemo(){this.showCodeDemo=!1},onChangeCode(e){console.log("[onChange] value: ",e)}}},[["render",function(e,o,a,l,s,i){const c=C("press-cell"),d=C("demo-block"),m=C("press-field"),u=C("press-code-input"),h=C("press-number-keyboard");return t(),n("div",{class:"demo-wrap"},[b(d,{title:e.t("basicUsage")},{default:r((()=>[b(c,{title:e.t("number"),"is-link":"",onClick:o[0]||(o[0]=e=>i.onShowKeyboard("number"))},null,8,["title"]),b(c,{title:e.t("accounting"),"is-link":"",onClick:o[1]||(o[1]=e=>i.onShowKeyboard("accounting"))},null,8,["title"]),b(c,{title:e.t("card"),"is-link":"",onClick:o[2]||(o[2]=e=>i.onShowKeyboard("card"))},null,8,["title"])])),_:1},8,["title"]),b(d,{title:e.t("custom")},{default:r((()=>[b(c,{title:e.t("withToolbar"),"is-link":"",onClick:o[3]||(o[3]=e=>i.onShowKeyboard("toolbar"))},null,8,["title"]),b(c,{title:e.t("withTitle"),"is-link":"",onClick:o[4]||(o[4]=e=>i.onShowKeyboard("title"))},null,8,["title"]),b(c,{title:e.t("decimalMark"),"is-link":"",onClick:o[5]||(o[5]=e=>i.onShowKeyboard("decimalMark"))},null,8,["title"]),b(c,{title:e.t("random"),"is-link":"",onClick:o[6]||(o[6]=e=>i.onShowKeyboard("random"))},null,8,["title"])])),_:1},8,["title"]),b(d,{title:e.t("bindValue")},{default:r((()=>[b(m,{label:e.t("bindLabel"),value:s.bindValue,"model-value":s.bindValue,readonly:"",clickable:!0,placeholder:e.t("input"),"always-embed":!0,onClick:o[7]||(o[7]=e=>i.onShowKeyboard("bindValue")),onClickInput:o[8]||(o[8]=e=>i.onShowKeyboard("bindValue"))},null,8,["label","value","model-value","placeholder"])])),_:1},8,["title"]),b(d,{title:e.t("codeValue")},{default:r((()=>[b(c,{onClick:o[9]||(o[9]=e=>i.onShowKeyboard("codeValue"))},{default:r((()=>[b(u,{"max-length":6,value:s.codeValue,"disabled-keyboard":!0},null,8,["value"])])),_:1})])),_:1},8,["title"]),b(h,{mode:s.mode,show:s.show,toolbar:s.toolbar,title:s.title,"decimal-mark":s.decimalMark,random:s.random,onChange:i.onChange,onBackspace:i.onBackspace,onCancel:i.onCancel,onConfirm:i.onConfirm,onClose:i.onClose},null,8,["mode","show","toolbar","title","decimal-mark","random","onChange","onBackspace","onCancel","onConfirm","onClose"]),b(h,{modelValue:s.bindValue,"onUpdate:modelValue":o[10]||(o[10]=e=>s.bindValue=e),mode:s.mode,show:s.showBindDemo,toolbar:s.toolbar,title:s.title,"decimal-mark":s.decimalMark,random:s.random,"max-length":6,onCancel:i.onCloseBindDemo,onConfirm:i.onCloseBindDemo,onClose:i.onCloseBindDemo},null,8,["modelValue","mode","show","toolbar","title","decimal-mark","random","onCancel","onConfirm","onClose"]),b(h,{modelValue:s.codeValue,"onUpdate:modelValue":o[11]||(o[11]=e=>s.codeValue=e),mode:s.mode,show:s.showCodeDemo,toolbar:s.toolbar,title:s.title,"decimal-mark":s.decimalMark,random:s.random,"max-length":6,onCancel:i.onCloseCodeDemo,onConfirm:i.onCloseCodeDemo,onClose:i.onCloseCodeDemo,onChange:i.onChangeCode},null,8,["modelValue","mode","show","toolbar","title","decimal-mark","random","onCancel","onConfirm","onClose","onChange"])])}],["__scopeId","data-v-d4283341"]]);export{B as default};
