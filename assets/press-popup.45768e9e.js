import{P as t}from"./press-button.68ee5a84.js";import{t as e}from"./function.80642e60.js";import{k as o,F as i,g as n,f as s}from"./press-component.5db9b2cc.js";import{_ as a,o as r,c as l,b as p,x as c,z as u,k as h,v as d,t as m,a as f,w as y,u as C,y as k,d as v}from"./index-26897e9f.js";const w={arrowIcon:"showBackArrow",closeIcon:"isShowpopupClose",showTitle:"isShowTitle",horizontal:"isCrossSlab",title:"popupTitle",button:"popupTitleBtn",borderButton:"isBorderBtn",closeOnClickOverlay:"canTouchRemove",confirm:"onConfirm",cancel:"onCancel"},g={customStyle:{type:String,default:""},showTitle:{type:Boolean,default:!0,required:!1},widthNumber:{type:Number,default:100,required:!1},horizontal:{type:Boolean,default:!1,required:!1},closeIcon:{type:Boolean,default:!1,required:!1},arrowIcon:{type:Boolean,default:!1},title:{type:String,default:"",required:!1},button:{type:String,default:"",required:!1},borderButton:{type:Boolean,default:!1,required:!1},disabledButton:{type:Boolean,default:!1,required:!1},validateConfirm:{type:[Function,null],default:null},isShow:{type:Boolean,default:!0,required:!1},zIndex:{type:String,default:"99",required:!1},popupClass:{type:String,default:"",required:!1},closeOnClickOverlay:{type:Boolean,default:!0},asyncClose:{type:[Function,null],default:null},asyncCancel:{type:[Function,null],default:null},asyncConfirm:{type:[Function,null],default:null},mode:{type:String,default:""},lockScroll:{type:Boolean,default:!1}},D=o(g,w);const T=a({name:"PressPopup",components:{PressButton:t},props:{...D},options:{virtualHost:!0,styleIsolation:"shared"},emits:["onCancel","cancel","onConfirm","confirm"],data(){return{isEnter:!0,innerShow:this.mode!==i&&!!this.isShow,timer:0,watchShowTimer:null,functionModeData:{...n(D)}}},computed:{buttonType(){return this.getPropOrData("borderButton")?"e-sport-border":this.getPropOrData("disabledButton")?"e-sport-primary-disabled":"e-sport-primary"},popupStyle(){const t=this.getPropOrData("customStyle");return`z-index: ${this.getPropOrData("zIndex")};${t};`},isFunctionMode(){return this.mode===i}},watch:{isShow:{handler(t){this.isFunctionMode||(this.isEnter=t,t?(clearTimeout(this.watchShowTimer),this.innerShow=!0):(clearTimeout(this.watchShowTimer),this.watchShowTimer=setTimeout((()=>{this.innerShow=!1}),300)))},immediate:!0},isEnter:{handler(t){document.body.style.overflowY=t?"hidden":""},immediate:!0}},mounted(){},beforeDestroy(){this.onBeforeDestroy()},beforeUnmount(){this.onBeforeDestroy()},methods:{onBeforeDestroy(){clearTimeout(this.timer)},showDialog(t){t&&(this.functionModeData={...this.functionModeData,...t}),this.innerShow=!0,this.isEnter=!0},getPropOrData(t){return s({allProps:D,isFunctionMode:this.isFunctionMode,functionModeData:this.functionModeData,propsKeyMap:w,key:t,context:this})},preventTouchMove(){},onClickTouch(){this.getPropOrData("closeOnClickOverlay")&&this.clickCancel()},clickCancel(){"function"!=typeof this.asyncCancel?"function"!=typeof this.asyncClose?this.$parent.validateCancel?e(this.$parent.validateCancel()).then((t=>{t&&this.emitCancel()})):this.emitCancel():e(this.asyncClose()).then((t=>{t&&this.emitCancel()})):e(this.asyncCancel()).then((t=>{t&&this.emitCancel()}))},emitCancel(){this.isEnter=!1,this.timer=setTimeout((()=>{this.$emit("onCancel"),this.$emit("cancel"),this.innerShow=!1}),300);const{callback:t}=this.functionModeData;"function"==typeof t&&t("cancel")},clickConfirm(){"function"!=typeof this.asyncConfirm?this.$parent.validateConfirm?e(this.$parent.validateConfirm()).then((t=>{t&&this.emitConfirm()})):this.emitConfirm():e(this.asyncConfirm()).then((t=>{t&&this.emitConfirm()}))},emitConfirm(){this.isEnter=!1,this.timer=setTimeout((()=>{this.$emit("onConfirm"),this.$emit("confirm"),this.innerShow=!1}),300);const{callback:t}=this.functionModeData;"function"==typeof t&&t("confirm")}}},[["render",function(t,e,o,i,n,s){const a=v("PressButton");return n.innerShow?(r(),l("div",{key:0,class:c(["press-popup",s.getPropOrData("popupClass"),s.getPropOrData("horizontal")?"press-popup__hor":"press-popup__vert","white"===t.mode?"press-popup--white":""]),style:k(s.popupStyle),onTouchmove:e[6]||(e[6]=u(((...t)=>s.preventTouchMove&&s.preventTouchMove(...t)),["stop"]))},[p(" 透明遮罩 "),t.lockScroll?(r(),l("div",{key:0,class:c(["press-popup--mask",n.isEnter?"press--animation__fade-in":"press--animation__fade-out"]),onClick:e[0]||(e[0]=u(((...t)=>s.onClickTouch&&s.onClickTouch(...t)),["stop"])),onTouchmove:e[1]||(e[1]=u(((...t)=>s.preventTouchMove&&s.preventTouchMove(...t)),["stop","prevent"]))},null,34)):(r(),l("div",{key:1,class:c(["press-popup--mask",n.isEnter?"press--animation__fade-in":"press--animation__fade-out"]),onClick:e[2]||(e[2]=u(((...t)=>s.onClickTouch&&s.onClickTouch(...t)),["stop"]))},null,2)),h("div",{class:c(["press-popup--content",n.isEnter?s.getPropOrData("horizontal")?"press--animation__right-enter":"press--animation__bottom-enter":s.getPropOrData("horizontal")?"press--animation__right-leave":"press--animation__bottom-leave"]),style:k({width:s.getPropOrData("horizontal")?`${s.getPropOrData("widthNumber")}%`:"100%"})},[s.getPropOrData("showTitle")||s.getPropOrData("horizontal")&&s.getPropOrData("closeIcon")&&s.getPropOrData("arrowIcon")?p("v-if",!0):(r(),l("div",{key:0,class:"press-popup--title-line",onClick:e[3]||(e[3]=u(((...t)=>s.clickCancel&&s.clickCancel(...t)),["stop"]))})),s.getPropOrData("showTitle")?(r(),l("div",{key:1,class:"press-popup--title-wrap"},[h("div",{class:"press-popup__left"},[d(t.$slots,"icon",{},(()=>[s.getPropOrData("closeIcon")?(r(),l("div",{key:0,class:"press-popup--close iconfont icon-close",onClick:e[4]||(e[4]=u(((...t)=>s.clickCancel&&s.clickCancel(...t)),["stop"]))})):s.getPropOrData("arrowIcon")?(r(),l("div",{key:1,class:"press-popup--arrow iconfont icon-back",onClick:e[5]||(e[5]=u(((...t)=>s.clickCancel&&s.clickCancel(...t)),["stop"]))})):p("v-if",!0)]),!0)]),s.getPropOrData("title")?(r(),l("p",{key:0,class:"press-popup--title"},m(s.getPropOrData("title")),1)):d(t.$slots,"title",{key:1},void 0,!0),h("div",{class:"press-popup--title-btn-wrap"},[d(t.$slots,"button",{},(()=>[s.getPropOrData("button")?(r(),f(a,{key:0,type:s.buttonType,"custom-style":"width:auto;height:100%;padding:0 10px;font-size:inherit;",onClick:s.clickConfirm},{default:y((()=>[C(m(s.getPropOrData("button")),1)])),_:1},8,["type","onClick"])):p("v-if",!0)]),!0)])])):p("v-if",!0),d(t.$slots,"default",{},void 0,!0)],6)],38)):p("v-if",!0)}],["__scopeId","data-v-91ef89f0"]]);export{T as P,g as n};
