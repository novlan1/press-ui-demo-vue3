import{_ as t,z as e,u as r,v as s,o as l,c as i,f as a,F as o,k as n,n as u,a as m,t as d,d as g,r as p,P as h,i as c,j as f,h as y}from"./index-d9d977eb.js";import{P as x,a as T}from"./press-grid.b3d6f828.js";import{b}from"./utils.dccf1609.js";import"./parent-map.7daf54ee.js";import"./relation.8b10893c.js";const S={name:"PressRollingTextItem",options:{styleIsolation:"shared"},props:{customClass:{type:String,default:""},direction:{type:String,default:"down"},figureArr:{type:Array,default:()=>[]},height:{type:Number,default:40},delay:{type:Number,default:0},isStart:{type:Boolean,default:!1},duration:{type:Number,default:2}},data:()=>({utils:e}),computed:{newFigureArr(){return"down"===this.direction?this.figureArr.slice().reverse():this.figureArr},translatePx(){return`-${this.height*(this.figureArr.length-1)}px`},itemStyle(){return r({lineHeight:s(this.height)})},rootStyle(){return r({height:s(this.height),"--press-translate":this.translatePx,"--press-duration":`${this.duration}s`,"--press-delay":`${this.delay}s`})}},mounted(){},methods:{}};const C={name:"PressRollingText",options:{styleIsolation:"shared"},components:{PressRollingTextItem:t(S,[["render",function(t,e,r,s,g,p){return l(),i("div",{class:u([g.utils.bem2("rolling-text-item",[r.direction]),r.customClass]),style:m(p.rootStyle)},[a("div",{class:u(g.utils.bem2("rolling-text-item__box",{animate:r.isStart}))},[(l(!0),i(o,null,n(p.newFigureArr,((t,e)=>(l(),i("div",{key:e,class:u([g.utils.bem2("rolling-text-item__item",{last:e===p.newFigureArr.length-1})]),style:m(p.itemStyle)},d(t),7)))),128))],2)],6)}],["__scopeId","data-v-dec671fc"]])},props:{customClass:{type:String,default:""},itemCustomClass:{type:String,default:""},startNum:{type:Number,default:0},targetNum:{type:Number,default:0},textList:{type:Array,default:()=>[]},duration:{type:Number,default:2},direction:{type:String,default:"down"},autoStart:{type:Boolean,default:!0},stopOrder:{type:String,default:"ltr"},height:{type:Number,default:40}},data(){return{rolling:this.autoStart}},computed:{isCustomType(){return Array.isArray(this.textList)&&this.textList.length},itemLength(){return this.isCustomType?this.textList[0].length:`${Math.max(this.startNum,this.targetNum)}`.length},targetNumArr(){return this.isCustomType?new Array(this.itemLength).fill(""):b(this.targetNum,this.itemLength).split("")},startNumArr(){return b(this.startNum,this.itemLength).split("")}},watch:{autoStart:{handler(t){t&&this.start()}}},mounted(){},methods:{getTextArrByIdx(t){const e=[];for(let r=0;r<this.textList.length;r++)e.push(this.textList[r][t]);return e},getFigureArr(t){const e=+this.startNumArr[t],r=+this.targetNumArr[t],s=[];for(let l=e;l<=9;l++)s.push(l);for(let l=0;l<=2;l++)for(let t=0;t<=9;t++)s.push(t);for(let l=0;l<=r;l++)s.push(l);return s},getDelay(t,e){return"ltr"===this.stopOrder?.2*t:.2*(e-1-t)},start(){this.rolling=!0},reset(){this.rolling=!1,this.autoStart&&setTimeout((()=>{this.start()}),300)}}};const N=["aaaaa","bbbbb","ccccc","ddddd","eeeee","fffff","ggggg"];const _=t({i18n:{"zh-CN":{direction:"设置翻滚方向",stopOrder:"设置各数位停止顺序",rollDown:"向下翻滚",rollUp:"向上翻滚",stopFrom:"从个位停止",manualControl:"手动控制",customStyle:"自定义样式",noNumberType:"翻转非数字内容",start:"开始",reset:"重置"},"en-US":{direction:"Set Rolling Direction",stopOrder:"Set Stop Order",rollDown:"Roll Down",rollUp:"Roll Up",stopFrom:"Right Side Stop First",manualControl:"Manual Control",customStyle:"Custom Style",noNumberType:"Roll Non-numeric Text",start:"Start",reset:"Reset"}},components:{PressRollingText:t(C,[["render",function(t,e,r,s,a,m){const d=p("PressRollingTextItem");return l(),i("div",{class:u(["press-rolling-text",r.customClass])},[(l(!0),i(o,null,n(m.targetNumArr,((t,e)=>(l(),g(d,{key:e,"figure-arr":m.isCustomType?m.getTextArrByIdx(e):m.getFigureArr(e),duration:r.duration,direction:r.direction,"is-start":a.rolling,height:r.height,delay:m.getDelay(e,m.itemLength),"custom-class":r.itemCustomClass},null,8,["figure-arr","duration","direction","is-start","height","delay","custom-class"])))),128))],2)}],["__scopeId","data-v-a16098dd"]]),PressButton:h,PressGrid:x,PressGridItem:T},data:()=>({textList:N}),methods:{startRoll(t){this.$refs[t].reset(),setTimeout((()=>{this.$refs[t].start()}))},start(){this.$refs.rollingText6.start()},reset(){this.$refs.rollingText6.reset()}}},[["render",function(t,e,r,s,o,n){const u=p("PressRollingText"),m=p("PressButton"),g=p("demo-block"),h=p("PressGridItem"),x=p("PressGrid");return l(),i("div",{class:"demo-wrap"},[c(g,{title:t.t("basicUsage")},{default:f((()=>[c(u,{ref:"rollingText","start-num":0,"target-num":123,"auto-start":!1},null,512),a("div",{class:"button-wrap"},[c(m,{type:"primary",size:"small",onClick:e[0]||(e[0]=t=>n.startRoll("rollingText"))},{default:f((()=>[y(d(t.t("rollDown")),1)])),_:1})])])),_:1},8,["title"]),c(g,{title:t.t("direction")},{default:f((()=>[c(u,{ref:"rollingText2","start-num":0,"target-num":432,direction:"up","auto-start":!1},null,512),a("div",{class:"button-wrap"},[c(m,{type:"primary",size:"small",onClick:e[1]||(e[1]=t=>n.startRoll("rollingText2"))},{default:f((()=>[y(d(t.t("rollUp")),1)])),_:1})])])),_:1},8,["title"]),c(g,{title:t.t("stopOrder")},{default:f((()=>[c(u,{ref:"rollingText3","start-num":0,"target-num":54321,"auto-start":!1,"stop-order":"rtl"},null,512),a("div",{class:"button-wrap"},[c(m,{type:"primary",size:"small",onClick:e[2]||(e[2]=t=>n.startRoll("rollingText3"))},{default:f((()=>[y(d(t.t("stopFrom")),1)])),_:1})])])),_:1},8,["title"]),c(g,{title:t.t("noNumberType")},{default:f((()=>[c(u,{ref:"rollingText4","text-list":o.textList,"auto-start":!1,duration:1},null,8,["text-list"]),a("div",{class:"button-wrap"},[c(m,{type:"primary",size:"small",onClick:e[3]||(e[3]=t=>n.startRoll("rollingText4"))},{default:f((()=>[y(d(t.t("start")),1)])),_:1})])])),_:1},8,["title"]),c(g,{title:t.t("customStyle")},{default:f((()=>[c(u,{ref:"rollingText5","custom-class":"my-rolling-text",height:54,"start-num":12345,"target-num":54321},null,512)])),_:1},8,["title"]),c(g,{title:t.t("manualControl")},{default:f((()=>[c(u,{ref:"rollingText6",height:54,"custom-class":"my-rolling-text","start-num":0,"target-num":54321,"auto-start":!1},null,512)])),_:1},8,["title"]),c(x,{clickable:"","custom-class":"grid-wrap","column-num":2},{default:f((()=>[c(h,{text:t.t("start"),icon:"play-circle-o",onClick:n.start},null,8,["text","onClick"]),c(h,{text:t.t("reset"),icon:"replay",onClick:n.reset},null,8,["text","onClick"])])),_:1})])}],["__scopeId","data-v-f22e7ebf"]]);export{_ as default};
