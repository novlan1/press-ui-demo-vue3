var e={};function i(){return(navigator.userAgent||"").toLowerCase()}function n(){var e=i();return/iphone|ipod|ipad|Mac OS X/i.test(e)||!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}function o(){var e=i(),o=-1!==e.indexOf("micromessenger"),s=-1!==e.indexOf("wxwork"),t=-1!==e.indexOf(" qq/"),d=-1!==e.indexOf(" igameapp/"),r=-1!==e.indexOf(" gamelife/"),a=-1!==e.indexOf("android"),l=n(),c=l,w=-1!==e.indexOf(" msdk/"),u=-1!==e.indexOf(" webviewx msdk/"),f=-1!==e.indexOf(" msdk/5"),m=-1!==e.indexOf("ingame"),v=w||m,p=-1!==e.indexOf("gamehelper"),k=-1!==e.indexOf("gamehelper_20004"),b=-1!==e.indexOf("miniprogram")||"undefined"!=typeof window&&"miniprogram"===window.__wxjs_environment,y=-1!==e.indexOf("lolapp"),S=/(?:Windows Phone)/.test(e);return{isWeixin:o,isWorkWeixin:s,isQQ:t,isPvpApp:d,isTipApp:r,isAndroid:a,isIos:l,isIOS:c,isMsdk:w,isMsdkX:u,isMsdkV5:f,isSlugSdk:m,isInGame:v,isGHelper:p,isGHelper20004:k,isMiniProgram:b,isLolApp:y,isWindowsPhone:S,isSymbian:/(?:SymbianOS)/.test(e)||S,isPc:!e.match(/(phone|pad|pod|iphone|ipod|ios|ipad|android|mobile|blackberry|iemobile|mqqbrowser|juc|fennec|wosbrowser|browserng|webos|symbian|windows phone)/i)}}Object.defineProperty(e,"__esModule",{value:!0});e.checkNodeEnv=function(){return!("undefined"!=typeof window&&window.navigator)},e.checkUAIsIOS=n,e.getEnvUAType=o,e.initEnv=function(){return o()};var s={},t={};!function(e){function i(n){return e.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,i(n)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return t},set exports(e){t=e}});var d={};Object.defineProperty(d,"__esModule",{value:!0});var r=function(e){var i,n=document.getElementsByTagName("script")[0];null===(i=null==n?void 0:n.parentNode)||void 0===i||i.insertBefore(e,n)};d.loader=function(e,i,n,o){var s;void 0===n&&(n="utf-8"),void 0===o&&(o=null),i&&"function"!=typeof i&&(o=i.context||o,s=i.setup,i=i.callback);var t,d,a=!1,l=function(){a||(a=!0,null==d||d(),i&&i.call(o,t))},c=function(){t=new Error(e||"EMPTY"),l()},w=document.querySelector('script[src="'.concat(e,'"]'));if(w)var u=setInterval((function(){w.isready&&(l(),clearInterval(u))}),20);else{var f=document.createElement("script");if(f.isready=!1,f.readyState&&!("async"in f)){var m={loaded:!0,complete:!0},v=!1;d=function(){f.onreadystatechange=null,f.onerror=null},f.onreadystatechange=function(){var e=f.readyState;if(!t){if(!v&&m[e]&&(v=!0,r(f)),"loaded"===e&&(f.children,"loading"===f.readyState))return c();"complete"===f.readyState&&(f.isready=!0,l())}},f.onerror=c,s&&s.call(o,f),f.src=e}else d=function(){f.onload=null,f.onerror=null},f.onerror=c,f.onload=function(){f.isready=!0,l()},f.async=!0,f.charset=n||"utf-8",s&&s.call(o,f),f.src=e,r(f)}},Object.defineProperty(s,"__esModule",{value:!0});var a=e,l=d;function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var w=c(t);function u(e){if(e||(e=a.initEnv()),console.info("[closeMsdkWebview] env",e),e.isMsdkV5&&"function"==typeof window.msdkCall){window.msdkCall('{"MsdkMethod":"closeWebView"}')}else e.isMsdk?"function"==typeof window.msdkCloseWebview?(!e.isIOS||e.isIOS&&window.msdkiOSHandler)&&window.msdkCloseWebview():"function"==typeof window.msdkCallNative&&window.msdkCallNative('{"MsdkMethod":"CloseWebview"}'):e.isSlugSdk&&window.customBrowserInterface&&window.customBrowserInterface.closeWebview()}var f=function(e){var i,n;void 0===e&&(e=!0);var o=a.getEnvUAType(),s=o.isSlugSdk,t=o.isMsdkV5,d=o.isMsdk,r=o.isMsdkX,l=o.isAndroid;if(s){if("object"===w.default(window.customBrowserInterface)){var c=e?"hideUi":"showUi";window.customBrowserInterface[c]()}}else if(t){var u=JSON.stringify({MsdkMethod:"setFullScreen",isFullScreen:!!e});setTimeout((function(){var e,i;l?null===(e=window.msdkCall)||void 0===e||e.call(window,u):window.WebViewJavascriptBridge?null===(i=window.msdkCall)||void 0===i||i.call(window,u):document.addEventListener("WebViewJavascriptBridgeReady",(function(){var e;null===(e=window.msdkCall)||void 0===e||e.call(window,u)}),!1)}),100)}else if(d&&!r){var f=JSON.stringify({MsdkMethod:"WGSetFullScreen",isFullScreen:!!e});l?null===(i=window.msdkCall)||void 0===i||i.call(window,"WGSetFullScreen",f):window.WebViewJavascriptBridge?null===(n=window.msdkCall)||void 0===n||n.call(window,"WGSetFullScreen",f):document.addEventListener("WebViewJavascriptBridgeReady",(function(){var e;null===(e=window.msdkCall)||void 0===e||e.call(window,"WGSetFullScreen",f)}),!1)}};s.addMsdkNativeCallbackListener=function(e){var i=a.initEnv();i.isMsdk&&!i.isMsdkV5&&("function"==typeof window.setMsdkCallback?window.setMsdkCallback(e):"function"==typeof window.msdkAddNativeCallbackObserver&&window.msdkAddNativeCallbackObserver(e))},s.callJsBrowserAdapter=function(){return new Promise((function(e){var i=a.initEnv();i.isMsdkV5?l.loader("https://image-1251917893.file.myqcloud.com/igame/common/js/msdkJsAdapterV5.js",(function(){e(!0)})):i.isMsdk?i.isMsdkX?l.loader("https://image-1251917893.file.myqcloud.com/igame/common/js/msdkJsAdapterV3_embedded.js",(function(){e(!0)})):l.loader("https://image-1251917893.file.myqcloud.com/igame/common/js/msdkJsAdapterV3.js",(function(){e(!0)})):i.isSlugSdk&&l.loader("https://tiem-cdn.qq.com/slugteam/sdk/browser_adapt.js",(function(){e(!0)}))}))},s.callJsReSetFullScreen=function(){f(!1)},s.callJsSetFullScreen=f,s.closeMsdkWebview=u,s.closeWebView=function(){console.log("[closeWebView] call close webview");var e=a.initEnv();e.isMsdk?u():e.isSlugSdk?window.customBrowserInterface&&window.customBrowserInterface.closeWebview():(window.location.href="about:blank",console.log("[closeWebView] call close webview failed"))},s.removeMsdkNativeCallbackListener=function(e){var i=a.initEnv();i.isMsdk&&!i.isMsdkV5&&"function"==typeof window.msdkRemoveNativeCallbackObserver&&window.msdkRemoveNativeCallbackObserver(e)},s.sendToMsdkNative=function(e){void 0===e&&(e="");var i=a.initEnv();i.isMsdk&&!i.isMsdkV5?"function"==typeof window.msdkCallNative?window.msdkCallNative(e):"function"==typeof window.msdkCall&&window.msdkCall("WGSendMessageToNative",'{"MsdkMethod":"WGSendMessageToNative","MsgData":"'.concat(e,'"}')):i.isAndroid?confirm(e):i.isIOS&&(window.location.href=encodeURIComponent(e))};export{e,d as l,s as m};
