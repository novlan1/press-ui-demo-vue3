import{_ as t,o as e,c as s,j as i,w as l,k as a,m as n,n as r,p as o,b as d,F as c,r as h,l as u,t as p,a as b,d as f,S as m}from"./index-7a15811b.js";import{P as y}from"./press-info.b7012b43.js";import{P as g}from"./press-sticky.e9edd539.js";import{t as v}from"./touch.bcbb2f5b.js";import{r as x,g as C}from"./version.2049afb8.js";import{g as T,b as S}from"./rect.d9533e17.js";import{d as $,a as w,b as k,n as I}from"./press-component.fd531b70.js";import{P as _,C as N}from"./relation.25345683.js";import{s as z,u as B}from"./utils.f8cec38d.js";import{d as P}from"./parent-map.b443f4cc.js";const j={tabClass:function(t,e){const s=["tab-class"];return t&&s.push("tab-active-class"),e&&s.push("press-ellipsis"),s.join(" ")},tabStyle:function(t){const e=t.active?t.titleActiveColor:t.titleInactiveColor,s=t.scrollable&&t.ellipsis;return"card"===t.type?z({"border-color":t.color,"background-color":!t.disabled&&t.active?t.color:null,color:e||(t.disabled||t.active?null:t.color),"flex-basis":s?88/t.swipeThreshold+"%":null}):z({color:e,"flex-basis":s?88/t.swipeThreshold+"%":null})},trackStyle:function(t){return t.animated?z({left:-100*t.currentIndex+"%","transition-duration":`${t.duration}s`,"-webkit-transition-duration":`${t.duration}s`}):""},lineStyle:function(t){const e=B.addUnit(t.lineWidth);return z({width:e,transform:`translateX(${t.lineOffsetLeft}px)`,"-webkit-transform":`translateX(${t.lineOffsetLeft}px)`,"background-color":t.color,height:-1!==t.lineHeight?B.addUnit(t.lineHeight):null,"border-radius":-1!==t.lineHeight?B.addUnit(t.lineHeight):null,"transition-duration":t.skipTransition?null:`${t.duration}s`,"-webkit-transition-duration":t.skipTransition?null:`${t.duration}s`})},navStyle:function(t,e){return z({"border-color":"card"===e&&t?t:null})}};const A=t({name:"PressTabs",options:{...$,styleIsolation:"shared"},components:{PressInfo:y,PressSticky:g},mixins:[v,_(P)],props:{...w,navClass:{type:String,default:""},tabClass:{type:String,default:""},tabActiveClass:{type:String,default:""},lineClass:{type:String,default:""},sticky:{type:Boolean,default:!1},border:{type:Boolean,default:!1},swipeable:{type:Boolean,default:!1},titleActiveColor:{type:String,default:""},titleInactiveColor:{type:String,default:""},color:{type:String,default:""},animated:{type:Boolean,default:!1},lineWidth:{type:[Number,String,null],default:40},lineHeight:{type:[Number,String,null],default:-1},active:{type:[Number,String,null],default:0},type:{type:String,default:"line"},ellipsis:{type:Boolean,default:!0},duration:{type:Number,default:.3},zIndex:{type:Number,default:1},swipeThreshold:{type:Number,default:5},offsetTop:{type:Number,default:0},lazyRender:{type:Boolean,default:!0},extraClassPrefix:{type:String,default:""},mode:{type:String,default:""}},emits:["scroll","disabled","click","input","change"],data:()=>({tabs:[],scrollLeft:0,scrollable:!1,currentIndex:0,container:null,skipTransition:!0,scrollWithAnimation:!1,lineOffsetLeft:0,computed:j,utils:B}),computed:{tabsClass(){const{type:t,customClass:e,mode:s}=this,i="hor"===s,l="e-sport"===s;return`${this.bem3("tabs",[t,{hor:i,"e-sport":l}])} ${e}`},tabsWrapClass(){const{scrollable:t,type:e,border:s}=this;return`${this.bem3("tabs__wrap",{scrollable:t})} ${"line"===e&&s?this.bem3("hairline--top-bottom"):""}`},tabScrollClass(){const{type:t}=this;return this.bem3("tabs__scroll",[t])},theNavClass(){const{type:t,ellipsis:e,navClass:s}=this,i=`${s} nav-class`;return`${this.bem3("tabs__nav",[t,{complete:!e}])} ${i}`},navStyle(){const{color:t,type:e}=this;return j.navStyle(t,e)},lineStyle(){const{color:t,lineOffsetLeft:e,lineHeight:s,skipTransition:i,duration:l,lineWidth:a}=this;return j.lineStyle({color:t,lineOffsetLeft:e,lineHeight:s,skipTransition:i,duration:l,lineWidth:a})},trackClass(){const{animated:t}=this;return`${this.bem3("tabs__track",[{animated:t}])}`},trackStyle(){const{duration:t,currentIndex:e,animated:s}=this;return j.trackStyle({duration:t,currentIndex:e,animated:s})},realEllipsis(){return this.scrollable&&this.ellipsis}},watch:{animated:{handler(){this.children.forEach(((t,e)=>t.updateRender(e===this.currentIndex,this)))}},lineWidth:{handler(){this.resize()}},active:{handler(t){t!==this.getCurrentName()&&this.setCurrentIndexByName(t)}},swipeThreshold:{handler(t){this.setData({scrollable:this.children.length>t||!this.ellipsis})}}},created(){this.children=[]},mounted(){x((()=>{this.swiping=!0,this.container=()=>this.$refs.pressTabs,this.updateTabs(),this.resize(),this.scrollIntoView()})),this.$nextTick((()=>{this.resize()}))},methods:{bem3(t,e){return B.bem3(t,e,this.extraClassPrefix)},getTabClass(t,e){const{currentIndex:s,ellipsis:i,tabClass:l,tabActiveClass:a}=this,n=`${a} tab-active-class`,r=`${l} tab-class`;return`${this.bem3("tab",{active:e===s,disabled:t.disabled,complete:!i})} ${this.bem3("ellipsis")} ${r} ${e===s?n:""}`},getTabStyle(t,e){const{type:s,color:i,active:l,currentIndex:a,realEllipsis:n,titleActiveColor:r,titleInactiveColor:o,swipeThreshold:d}=this,c=n?88/d+"%":null;return z("card"===s?{borderColor:i,backgroundColor:!t.disabled&&l?i:null,color:(e===a?r:o)||(t.disabled||l?null:i),flexBasis:c}:{color:e===a?r:o,flexBasis:c})},setData(t){Object.keys(t).forEach((e=>{this[e]=t[e]}))},updateTabs(){const{children:t=[]}=this;this.tabs=t.map((t=>({title:t.title,index:t.index,disabled:t.disabled,info:t.info,dot:t.dot,titleStyle:t.titleStyle}))),this.scrollable=t.length>this.swipeThreshold||!this.ellipsis,this.setCurrentIndexByName(this.active||this.getCurrentName())},trigger(t,e){const{currentIndex:s}=this,i=e||this.children[s];k(i)&&this.$emit(t,{index:i.index,name:i.getComputedName(),title:i.title})},onTap(t){const e=+t.currentTarget.dataset.index,s=this.children[e];s.disabled?this.trigger("disabled",s):(this.setCurrentIndex(e),I((()=>{this.trigger("click")})))},setCurrentIndexByName(t){const{children:e=[]}=this,s=e.filter((e=>e.getComputedName()===t));s.length&&this.setCurrentIndex(s[0].index)},setCurrentIndex(t){const{children:e=[]}=this;if(!k(t)||t>=e.length||t<0)return;if(C(this,(()=>{e.forEach(((e,s)=>{const i=s===t;i===e.active&&e.initialled||e.updateRender(i,this)}))})),t===this.currentIndex)return;const s=null!==this.currentIndex;this.setData({currentIndex:t}),x((()=>{this.resize(),this.scrollIntoView()})),I((()=>{this.trigger("input"),s&&this.trigger("change")}))},getCurrentName(){const t=this.children[this.currentIndex];if(t)return t.getComputedName()},resize(){if("line"!==this.type)return;const{currentIndex:t,ellipsis:e,skipTransition:s}=this;Promise.all([T(this,".press-tab"),S(this,".press-tabs__line")]).then((([i=[],l])=>{const a=i[t];if(null==a)return;let n=i.slice(0,t).reduce(((t,e)=>t+e.width),0);n+=(a.width-l.width)/2+(e?0:8),this.setData({lineOffsetLeft:n}),this.swiping=!0,s&&I((()=>{this.setData({skipTransition:!1})}))})).catch((t=>{console.log("err",t)}))},scrollIntoView(){const{currentIndex:t,scrollable:e,scrollWithAnimation:s}=this;e&&Promise.all([T(this,".press-tab"),S(this,".press-tabs__nav")]).then((([e,i])=>{const l=e[t],a=e.slice(0,t).reduce(((t,e)=>t+e.width),0);this.setData({scrollLeft:a-(i.width-l.width)/2}),s||I((()=>{this.setData({scrollWithAnimation:!0})}))})).catch((t=>{console.log("error",t)}))},onTouchScroll(t){this.$emit("scroll",t)},onTouchStart(t){this.swipeable&&(this.swiping=!0,this.touchStart(t))},onTouchMove(t){this.swipeable&&this.swiping&&this.touchMove(t)},onTouchEnd(){if(!this.swipeable||!this.swiping)return;const{direction:t,deltaX:e,offsetX:s}=this;if("horizontal"===t&&s>=50){const t=this.getAvailableTab(e);-1!==t&&this.setCurrentIndex(t)}this.swiping=!1},getAvailableTab(t){const{tabs:e,currentIndex:s}=this,i=t>0?-1:1;for(let l=i;s+l<e.length&&s+l>=0;l+=i){const t=s+l;if(t>=0&&t<e.length&&e[t]&&!e[t].disabled)return t}return-1},getTabKey:(t,e)=>`${t.title||""} - ${e} -${t.index}`}},[["render",function(t,y,g,v,x,C){const T=f("press-info"),S=m,$=f("press-sticky");return e(),s("div",{ref:"pressTabs",class:r(C.tabsClass)},[i($,{disabled:!g.sticky,"z-index":g.zIndex,"offset-top":g.offsetTop,container:x.container,onScroll:C.onTouchScroll},{default:l((()=>[a("div",{class:r(C.tabsWrapClass)},[n(t.$slots,"nav-left",{},void 0,!0),i(S,{"scroll-x":x.scrollable,"scroll-with-animation":x.scrollWithAnimation,"scroll-left":x.scrollLeft,class:r(C.tabScrollClass),style:o(g.color?"border-color: "+g.color:"")},{default:l((()=>[a("div",{class:r(C.theNavClass),style:o(C.navStyle)},["line"===g.type?(e(),s("div",{key:0,class:r([`${C.bem3("tabs__line")} ${g.lineClass}`]),style:o(C.lineStyle)},null,6)):d("v-if",!0),(e(!0),s(c,null,h(x.tabs,((t,i)=>(e(),s("div",{key:C.getTabKey(t,i),"data-index":i,class:r([`${C.getTabClass(t,i)}`]),style:o([`${C.getTabStyle(t,i)}`]),onClick:y[0]||(y[0]=(...t)=>C.onTap&&C.onTap(...t))},[a("div",{class:r([`${C.bem3("tab__text")}`,g.ellipsis?"press-ellipsis":""]),style:o(t.titleStyle)},[u(p(t.title)+" ",1),null!==t.info||t.dot?(e(),b(T,{key:0,info:t.info,dot:t.dot,"custom-class":"press-tab__title__info"},null,8,["info","dot"])):d("v-if",!0)],6)],14,["data-index"])))),128))],6)])),_:1},8,["scroll-x","scroll-with-animation","scroll-left","class","style"]),n(t.$slots,"nav-right",{},void 0,!0)],2)])),_:3},8,["disabled","z-index","offset-top","container","onScroll"]),a("div",{class:r([`${C.bem3("tabs__content")}`]),onTouchstart:y[1]||(y[1]=(...t)=>C.onTouchStart&&C.onTouchStart(...t)),onTouchmove:y[2]||(y[2]=(...t)=>C.onTouchMove&&C.onTouchMove(...t)),onTouchend:y[3]||(y[3]=(...t)=>C.onTouchEnd&&C.onTouchEnd(...t)),onTouchcancel:y[4]||(y[4]=(...t)=>C.onTouchEnd&&C.onTouchEnd(...t))},[a("div",{class:r(C.trackClass),style:o(C.trackStyle)},[n(t.$slots,"default",{},void 0,!0)],6)],34)],2)}],["__scopeId","data-v-f6249838"]]);const W=t({name:"PressTab",mixins:[N(P)],options:{...$,styleIsolation:"shared"},props:{...w,dot:{type:Boolean,default:!1},info:{type:[String,Number,null],default:""},title:{type:[String,Number,null],default:""},disabled:{type:Boolean,default:!1},titleStyle:{type:String,default:""},name:{type:[String,Number,null],default:""},extraClassPrefix:{type:String,default:""},sortIndex:{type:Number,default:0}},emits:[],data:()=>({active:!1,shouldShow:!1,shouldRender:!1,initialled:!1,utils:B}),computed:{tabClass(){const{active:t,customClass:e=""}=this;return`${this.bem3("tab__pane",{active:t,inactive:!t})} ${e}`}},watch:{dot:{handler(){this.update()}},info:{handler(){this.update()}},title:{handler(){this.update()}},disabled:{handler(){this.update()}},titleStyle:{handler(){this.update()}}},created(){},mounted(){this.update()},methods:{bem3(t,e){return B.bem3(t,e,this.extraClassPrefix)},getComputedName(){return""!==this.name?this.name:this.index},updateRender(t,e){this.initialled=this.initialled||t,this.active=t,this.shouldRender=this.initialled||!e.lazyRender,this.shouldShow=t||e.animated},update(){this[P]&&(this[P].updateTabs(),x((()=>{this[P].resize()})))},destroyCallback(){this[P].updateTabs(),this.$nextTick((()=>{this[P].resize()}))}}},[["render",function(t,i,l,c,h,u){return e(),s("div",{class:r([u.bem3("tab__pane-wrapper")])},[a("div",{class:r(u.tabClass),style:o(h.shouldShow?"":"display: none;")},[h.shouldRender?n(t.$slots,"default",{key:0},void 0,!0):d("v-if",!0)],6)],2)}],["__scopeId","data-v-08318083"]]);export{A as P,W as a};
