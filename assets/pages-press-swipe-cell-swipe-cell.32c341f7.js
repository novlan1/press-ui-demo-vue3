import{d as t,a as e}from"./press-component.2f0dd2c7.js";import{t as s}from"./touch.bcbb2f5b.js";import{r as o}from"./number.df2f0694.js";import{_ as i,o as n,c as l,f as a,i as r,j as c,n as p,x as h,r as d,F as f,h as m,w as g,e as u,t as C}from"./index-e42a51d3.js";import{P as v,D as k}from"./handler.0deb07fc.js";import"./add-unit.0b1ca7ce.js";import"./index.f56fcc20.js";import"./handler-helper.33469563.js";import"./index.00df9f6b.js";import"./utils.6794d230.js";import"./h5-handler.80551546.js";import"./component-handler.311d77e3.js";import"./press-popup-plus.09702013.js";import"./press-icon-plus.1438eb11.js";import"./style.0f94ff97.js";import"./press-info.fb0eea39.js";import"./press-overlay.598dbfea.js";import"./press-transition.a772791a.js";import"./version.77a12274.js";import"./press-button.f68f21a1.js";import"./press-loading-plus.21bfc8e3.js";import"./press-loading.5ac91ded.js";import"./button.7aa36ec1.js";import"./color.3a05f6e0.js";import"./function.f2d4a004.js";import"./dialog-mixin.85859907.js";let y=[];const w=i({i18n:{"zh-CN":{select:"选择",delete:"删除",collect:"收藏",title:"单元格",confirm:"确定删除吗？",cardTitle:"商品标题",beforeClose:"异步关闭",customContent:"自定义内容"},"en-US":{select:"Select",delete:"Delete",collect:"Collect",title:"Cell",confirm:"Are you sure to delete?",cardTitle:"Title",beforeClose:"Before Close",customContent:"Custom Content"}},components:{PressSwipeCell:i({name:"PressSwipeCell",options:{...t},mixins:[s],props:{disabled:{type:Boolean,default:!1},leftWidth:{type:Number,default:0},rightWidth:{type:Number,default:0},asyncClose:{type:Boolean,default:!1},name:{type:String,default:""},...e},emits:["click","open","close"],data:()=>({catchMove:!1,wrapperStyle:"",offset:0}),watch:{leftWidth:{handler(t=0){this.offset>0&&this.swipeMove(t)}},rightWidth:{handler(t=0){this.offset<0&&this.swipeMove(-t)}}},created(){this.offset=0,y.push(this)},destroyed(){y=y.filter((t=>t!==this))},methods:{setData(t){Object.keys(t).forEach((e=>{this[e]=t[e]}))},open(t){const{leftWidth:e,rightWidth:s}=this,o="left"===t?e:-s;this.swipeMove(o),this.$emit("open",{position:t,name:this.name})},close(){this.swipeMove(0)},swipeMove(t=0){this.offset=o(t,-this.rightWidth,this.leftWidth);const e=`translate3d(${this.offset}px, 0, 0)`,s=this.dragging?"none":"transform .6s cubic-bezier(0.18, 0.89, 0.32, 1)";this.setData({wrapperStyle:`\n        -webkit-transform: ${e};\n        -webkit-transition: ${s};\n        transform: ${e};\n        transition: ${s};\n      `})},swipeLeaveTransition(){const{leftWidth:t,rightWidth:e}=this,{offset:s}=this;e>0&&-s>.3*e?this.open("right"):t>0&&s>.3*t?this.open("left"):this.swipeMove(0),this.setData({catchMove:!1})},startDrag(t){this.disabled||(this.startOffset=this.offset,this.touchStart(t))},noop(){},onDrag(t){this.disabled||(this.touchMove(t),"horizontal"===this.direction&&(this.dragging=!0,y.filter((t=>t!==this&&0!==t.offset)).forEach((t=>t.close())),this.setData({catchMove:!0}),this.swipeMove(this.startOffset+this.deltaX)))},endDrag(){this.disabled||(this.dragging=!1,this.swipeLeaveTransition())},onClick(t){const{key:e="outside"}=t.currentTarget.dataset;this.$emit("click",e),this.offset&&(this.asyncClose?this.$emit("close",{position:e,instance:this,name:this.name}):this.swipeMove(0))}}},[["render",function(t,e,s,o,i,m){return n(),l(f,null,[a(' @touchmove.stop.prevent="catchMove?noop:noop" '),r("div",{class:p(["press-swipe-cell",t.customClass]),"data-key":"cell",onClick:e[2]||(e[2]=h(((...t)=>m.onClick&&m.onClick(...t)),["stop","prevent"])),onTouchstart:e[3]||(e[3]=(...t)=>m.startDrag&&m.startDrag(...t)),onTouchmoveCapture:e[4]||(e[4]=(...t)=>m.onDrag&&m.onDrag(...t)),onTouchend:e[5]||(e[5]=(...t)=>m.endDrag&&m.endDrag(...t)),onTouchcancel:e[6]||(e[6]=(...t)=>m.endDrag&&m.endDrag(...t))},[r("div",{style:c(i.wrapperStyle),class:p(["press-swipe-cell__content",i.offset?"press-swipe-cell__content--moved":""])},[s.leftWidth?(n(),l("div",{key:0,class:"press-swipe-cell__left","data-key":"left",onClick:e[0]||(e[0]=h(((...t)=>m.onClick&&m.onClick(...t)),["stop","prevent"]))},[d(t.$slots,"left",{},void 0,!0)])):a("v-if",!0),d(t.$slots,"default",{},void 0,!0),s.rightWidth?(n(),l("div",{key:1,class:"press-swipe-cell__right","data-key":"right",onClick:e[1]||(e[1]=h(((...t)=>m.onClick&&m.onClick(...t)),["stop","prevent"]))},[d(t.$slots,"right",{},void 0,!0)])):a("v-if",!0)],6)],34)],2112)}],["__scopeId","data-v-62ee3785"]]),PressDialogPlus:v},data:()=>({asyncClose:!1}),methods:{onClick(t){console.log("onClick.val",t),this.onGTip(`click ${t}`)},onClose(...t){console.log("onClose.args",t),this.onGTip("close")},onOpen(t){console.log("onOpen.detail",t),this.onGTip(`[open] position: ${t.position}`)},onAsyncClose(t){console.log("onAsyncClose.detail",t);const{position:e,instance:s}=t;switch(e){case"left":case"cell":s.close();break;case"right":k.confirm({context:this,title:"确定删除吗？"}).then((()=>{console.log("1111"),s.close()})).catch((t=>{console.log("err",t)}))}}}},[["render",function(t,e,s,o,i,a){const c=u("press-swipe-cell"),p=u("demo-block");return n(),l("div",{class:"demo-wrap"},[m(p,{title:t.t("basicUsage"),"section-style":"margin:0;"},{default:g((()=>[m(c,{"right-width":65,"left-width":65,"async-close":i.asyncClose,onClick:a.onClick,onClose:a.onClose,onOpen:a.onOpen},{left:g((()=>[r("div",{class:"left"},C(t.t("select")),1)])),right:g((()=>[r("div",{class:"right"},C(t.t("delete")),1)])),default:g((()=>[r("div",{class:"content"},C(t.t("content")),1)])),_:1},8,["async-close","onClick","onClose","onOpen"])])),_:1},8,["title"]),m(p,{title:t.t("beforeClose"),"section-style":"margin:0;"},{default:g((()=>[m(c,{"right-width":65,"left-width":65,"async-close":!0,onClick:a.onClick,onClose:a.onAsyncClose,onOpen:a.onOpen},{left:g((()=>[r("div",{class:"left"},C(t.t("select")),1)])),right:g((()=>[r("div",{class:"right"},C(t.t("delete")),1)])),default:g((()=>[r("div",{class:"content"},C(t.t("content")),1)])),_:1},8,["onClick","onClose","onOpen"])])),_:1},8,["title"])])}],["__scopeId","data-v-e75d7df6"]]);export{w as default};
