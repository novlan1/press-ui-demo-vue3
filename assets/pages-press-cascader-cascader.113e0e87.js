import{h as e,d as t}from"./deep-clone.cd02d014.js";import{g as a}from"./computed.43e6233e.js";import{z as l,u as s,_ as o,q as i,A as n,o as c,c as u,e as r,t as d,d as h,b as p,i as v,j as m,F as f,k as y,f as C,n as b,a as x,r as g}from"./index-d9d977eb.js";import{a as k,P as A}from"./press-tabs.9dd28463.js";import{P as O}from"./press-field.79f9c56c.js";import{P as w}from"./press-popup-plus.5596c1e1.js";import"./parent-map.7daf54ee.js";import"./relation.8b10893c.js";import"./scroll-view.db72462b.js";import"./touch.bcbb2f5b.js";import"./press-sticky.d1cf23d3.js";import"./bind-event.fc0bee8b.js";import"./parent.59fa8a22.js";const F=(e,t,a)=>({text:e,value:t,children:a});function _(){return new Promise(((e,t)=>{a().then((t=>{const a=function(e){const{city_list:t,county_list:a,province_list:l}=e,s=new Map;Object.keys(l).forEach((e=>{s.set(e.slice(0,2),F(l[e],e,[]))}));const o=new Map;return Object.keys(t).forEach((e=>{const a=F(t[e],e,[]);o.set(e.slice(0,4),a);const l=s.get(e.slice(0,2));l&&l.children.push(a)})),Object.keys(a).forEach((e=>{const t=o.get(e.slice(0,4));t&&t.children.push(F(a[e],e))})),Array.from(s.values())}(t);e(a)})).catch((e=>{t(e)}))}))}function N(e,t,a){return e.selected&&e.selected[t]===a[t]}const V={isSelected:N,optionClass:function(e,t,a){return l.bem2("cascader__option",{selected:N(e,t,a),disabled:a.disabled})},optionStyle:function(e){const t=e.option.color||(N(e.tab,e.valueKey,e.option)?e.activeColor:void 0);return s({color:t})}};let L;var K;(K=L||(L={})).TEXT="text",K.VALUE="value",K.CHILDREN="children";const T={text:L.TEXT,value:L.VALUE,children:L.CHILDREN},S={name:"PressCascader",options:{styleIsolation:"shared"},components:{PressIcon:i,PressTab:k,PressTabs:A},props:{title:{type:String,default:""},value:{type:String,default:""},placeholder:{type:String,default:"请选择"},activeColor:{type:String,default:"#1989fa"},options:{type:Array,default:()=>[]},swipeable:{type:Boolean,default:!1},closeable:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},closeIcon:{type:String,default:"cross"},fieldNames:{type:Object,default:()=>T},useTitleSlot:Boolean},emits:["change","finish","close","click-tab"],data:()=>({tabs:[],activeTab:0,textKey:L.TEXT,valueKey:L.VALUE,childrenKey:L.CHILDREN,innerValue:"",utils:V}),watch:{options:{handler(){this.updateTabs()},deep:!0},value:{handler(e){this.updateValue(e)},deep:!0,immediate:!0},fieldNames:{handler(){this.updateFieldNames()},deep:!0,immediate:!0}},created(){this.updateTabs()},mounted(){},methods:{updateValue(e){if(void 0!==e){if(this.tabs.map((e=>e.selected&&e.selected[this.valueKey])).indexOf(e)>-1)return}this.innerValue=e,this.updateTabs()},updateFieldNames(){const{text:e="text",value:t="value",children:a="children"}=this.fieldNames||T;this.textKey=e,this.valueKey=t,this.childrenKey=a},getSelectedOptionsByValue(e,t){for(let a=0;a<e.length;a++){const l=e[a];if(l[this.valueKey]===t)return[l];if(l[this.childrenKey]){const e=this.getSelectedOptionsByValue(l[this.childrenKey],t);if(e)return[l,...e]}}},updateTabs(){const{options:e}=this,{innerValue:t}=this;if(e.length){if(void 0!==t){const a=this.getSelectedOptionsByValue(e,t);if(a){let t=e;const l=a.map((e=>{const a={options:t,selected:e},l=t.find((t=>t[this.valueKey]===e[this.valueKey]));return l&&(t=l[this.childrenKey]),a}));return t&&l.push({options:t,selected:null}),this.tabs=l,void n((()=>{this.activeTab=l.length-1}))}}this.tabs=[{options:e,selected:null}],this.activeTab=0}},onClose(){this.$emit("close")},onClickTab(e){const{index:t,title:a}=e;this.$emit("click-tab",{title:a,tabIndex:t}),this.activeTab=t},onSelect(e,t){if(t&&t.disabled)return;const{valueKey:a,childrenKey:l}=this;let{tabs:s}=this;if(s[e].selected=t,s.length>e+1&&(s=s.slice(0,e+1)),t[l]){const a={options:t[l],selected:null};s[e+1]?s[e+1]=a:s.push(a),n((()=>{this.activeTab=e+1}))}this.tabs=s;const o=s.map((e=>e.selected)).filter(Boolean),i=t[a],c={value:i,tabIndex:e,selectedOptions:o};this.innerValue=i,this.$emit("change",c),t[l]||this.$emit("finish",c)},getOptionsClass(e,t){return`${e.className||""} ${V.optionClass(t,this.valueKey,e)}`},getOptionsStyle(e,t){const{valueKey:a,activeColor:l}=this;return`${V.optionStyle({tab:t,valueKey:a,option:e,activeColor:l})}`},getUniqueKey:(e,t)=>`${e}-${t}`}};const j=[{text:"浙江省",value:"330000",children:[{text:"杭州市",value:"330100"}]},{text:"江苏省",value:"320000",children:[{text:"南京市",value:"320100"}]}];const P=o({i18n:{"zh-CN":{area:"地区",options:[{text:"浙江省",value:"330000",children:[{text:"杭州市",value:"330100",children:[{text:"上城区",value:"330102"},{text:"下城区",value:"330103"},{text:"江干区",value:"330104"}]},{text:"宁波市",value:"330200",children:[{text:"海曙区",value:"330203"},{text:"江北区",value:"330205"},{text:"北仑区",value:"330206"}]},{text:"温州市",value:"330300",children:[{text:"鹿城区",value:"330302"},{text:"龙湾区",value:"330303"},{text:"瓯海区",value:"330304"}]}]},{text:"江苏省",value:"320000",children:[{text:"南京市",value:"320100",children:[{text:"玄武区",value:"320102"},{text:"秦淮区",value:"320104"},{text:"建邺区",value:"320105"}]},{text:"无锡市",value:"320200",children:[{text:"锡山区",value:"320205"},{text:"惠山区",value:"320206"},{text:"滨湖区",value:"320211"}]},{text:"徐州市",value:"320300",children:[{text:"鼓楼区",value:"320302"},{text:"云龙区",value:"320303"},{text:"贾汪区",value:"320305"}]}]}],selectArea:"请选择地区",customColor:"自定义颜色",asyncOptions:"异步加载选项",asyncOptions1:[{text:"浙江省",value:"330000",children:[]}],asyncOptions2:[{text:"杭州市",value:"330100"},{text:"宁波市",value:"330200"}],currentLevel:e=>`当前为第 ${e} 级`,chinaAreaData:"中国省市区数据",customContent:"自定义选项上方内容",customFieldNames:"自定义字段名"},"en-US":{area:"Area",options:[{text:"Zhejiang",value:"330000",children:[{text:"Hangzhou",value:"330100",children:[{text:"Shangcheng",value:"330102"},{text:"Xiacheng",value:"330103"},{text:"Jianggan",value:"330104"}]},{text:"Ningbo",value:"330200",children:[{text:"Haishu",value:"330203"},{text:"Jiangbei",value:"330205"},{text:"Beilun",value:"330206"}]},{text:"Wenzhou",value:"330300",children:[{text:"Lucheng",value:"330302"},{text:"Longwan",value:"330303"},{text:"Ouhai",value:"330304"}]}]},{text:"Jiangsu",value:"320000",children:[{text:"Nanjing",value:"320100",children:[{text:"Xuanwu",value:"320102"},{text:"Qinghuai",value:"320104"},{text:"Jianye",value:"320105"}]},{text:"Wuxi",value:"320200",children:[{text:"Xishan",value:"320205"},{text:"Huishan",value:"320206"},{text:"Binhu",value:"320211"}]},{text:"Xuzhou",value:"320300",children:[{text:"Gulou",value:"320302"},{text:"Yunlong",value:"320303"},{text:"Jiawang",value:"320305"}]}]}],selectArea:"Select Area",customColor:"Custom Color",asyncOptions:"Async Options",asyncOptions1:[{text:"Zhejiang",value:"330000",children:[]}],asyncOptions2:[{text:"Hangzhou",value:"330100"},{text:"Ningbo",value:"330200"}],currentLevel:e=>`Current level is ${e}`,chinaAreaData:"China Area Data",customContent:"Custom Content",customFieldNames:"Custom Field Names"}},components:{PressCascader:o(S,[["render",function(e,t,a,l,s,o){const i=g("PressIcon"),n=g("PressTab"),k=g("PressTabs");return c(),u("div",{class:"press-cascader-index"},[a.showHeader?(c(),u("div",{key:0,class:"press-cascader__header"},[a.useTitleSlot?r(e.$slots,"title",{key:0},void 0,!0):(c(),u("span",{key:1,class:"press-cascader__title"},d(a.title),1)),a.closeable?(c(),h(i,{key:2,name:a.closeIcon,class:"press-cascader__close-icon",onClick:o.onClose},null,8,["name","onClick"])):p("v-if",!0)])):p("v-if",!0),v(k,{ref:"tabs",active:s.activeTab,"custom-class":"press-cascader__tabs","wrap-class":"press-cascader__tabs-wrap","tab-class":"press-cascader__tab",color:a.activeColor,border:!1,swipeable:a.swipeable,onClick:o.onClickTab},{default:m((()=>[(c(!0),u(f,null,y(s.tabs,((e,t)=>(c(),h(n,{key:e.tabIndex,title:e.selected?e.selected[s.textKey]:a.placeholder,style:{width:"100%"},"title-style":e.selected?"":"color: #969799;font-weight:normal;"},{default:m((()=>[C("div",{class:"press-cascader__options"},[(c(!0),u(f,null,y(e.options,((a,l)=>(c(),u("div",{key:""+o.getUniqueKey(l,"option"),class:b([`${o.getOptionsClass(a,e)}`]),style:x(""+o.getOptionsStyle(a,e)),onClick:()=>o.onSelect(t,a)},[C("span",null,d(a[s.textKey]),1),s.utils.isSelected(e,s.valueKey,a)?(c(),h(i,{key:0,name:"success",size:"18"})):p("v-if",!0)],14,["onClick"])))),128))])])),_:2},1032,["title","title-style"])))),128))])),_:1},8,["active","color","swipeable","onClick"])])}],["__scopeId","data-v-b7225d1c"]]),PressField:O,PressPopupPlus:w},data(){return{show:{basic:!1,customColor:!1,asyncOptions:!1,customFieldNames:!1,chinaArea:!1},leaving:{basic:!1,customColor:!1,asyncOptions:!1,customFieldNames:!1,chinaArea:!1},options:j,fieldValue:{basic:"",customColor:"",asyncOptions:"",customFieldNames:"",chinaArea:""},cascaderValue:{basic:"",customColor:"",asyncOptions:"",customFieldNames:"",chinaArea:""},curDemo:"",asyncStateOptions:this.t("asyncOptions1"),fieldNames:{text:"name",value:"code",children:"items"},chinaArea:[]}},computed:{isMp:()=>!1,customFieldOptions(){return function(e){const a=t(e),l=e=>{"text"in e&&(e.name=e.text,delete e.text),"value"in e&&(e.code=e.value,delete e.value),"children"in e&&(e.items=e.children,delete e.children,e.items.forEach(l))};return a.forEach(l),a}(this.t("options"))}},mounted(){this.getChinaArea()},methods:{onClick(t){e(),this.curDemo=t,this.show[t]=!0,this.leaving[this.curDemo]=!0},onClose(){this.show[this.curDemo]=!1},onFinish(e){console.log("[onFinish] detail: ",e);const{selectedOptions:t,value:a}=e,l=t.map((e=>e.text||e.name)).join("/");this.fieldValue[this.curDemo]=l,this.cascaderValue[this.curDemo]=a,this.onClose()},loadDynamicOptions(e){const{value:t}=e;"330000"===t&&setTimeout((()=>{this.asyncStateOptions[0].children=this.t("asyncOptions2")}),500)},afterLeave(){this.leaving[this.curDemo]=!1},getChinaArea(){_().then((e=>{this.chinaArea=e}))}}},[["render",function(e,t,a,l,s,o){const i=g("PressField"),n=g("PressCascader"),r=g("PressPopupPlus"),d=g("demo-block");return c(),u("div",{class:"demo-wrap"},[v(d,{title:e.t("basicUsage")},{default:m((()=>[v(i,{value:s.fieldValue.basic,"model-value":s.fieldValue.basic,"is-link":"",readonly:o.isMp,label:e.t("area"),placeholder:e.t("selectArea"),onClick:t[0]||(t[0]=e=>o.onClick("basic")),onClickInput:t[1]||(t[1]=e=>o.onClick("basic"))},null,8,["value","model-value","readonly","label","placeholder"]),v(r,{show:s.show.basic,round:"",position:"bottom",onAfterLeave:o.afterLeave},{default:m((()=>[s.show.basic||s.leaving.basic?(c(),h(n,{key:0,value:s.cascaderValue.basic,title:e.t("selectArea"),options:e.t("options"),onClose:o.onClose,onFinish:o.onFinish},null,8,["value","title","options","onClose","onFinish"])):p("v-if",!0)])),_:1},8,["show","onAfterLeave"])])),_:1},8,["title"]),v(d,{title:e.t("chinaAreaData")},{default:m((()=>[v(i,{value:s.fieldValue.chinaArea,"model-value":s.fieldValue.chinaArea,"is-link":"",readonly:o.isMp,label:e.t("area"),placeholder:e.t("selectArea"),onClick:t[2]||(t[2]=e=>o.onClick("chinaArea")),onClickInput:t[3]||(t[3]=e=>o.onClick("chinaArea"))},null,8,["value","model-value","readonly","label","placeholder"]),v(r,{show:s.show.chinaArea,round:"",position:"bottom",onAfterLeave:o.afterLeave},{default:m((()=>[s.show.chinaArea||s.leaving.chinaArea?(c(),h(n,{key:0,value:s.cascaderValue.chinaArea,title:e.t("selectArea"),options:s.chinaArea,onClose:o.onClose,onFinish:o.onFinish},null,8,["value","title","options","onClose","onFinish"])):p("v-if",!0)])),_:1},8,["show","onAfterLeave"])])),_:1},8,["title"]),v(d,{title:e.t("customColor")},{default:m((()=>[v(i,{value:s.fieldValue.customColor,"model-value":s.fieldValue.customColor,"is-link":"",readonly:o.isMp,label:e.t("area"),placeholder:e.t("selectArea"),onClick:t[4]||(t[4]=e=>o.onClick("customColor")),onClickInput:t[5]||(t[5]=e=>o.onClick("customColor"))},null,8,["value","model-value","readonly","label","placeholder"]),v(r,{show:s.show.customColor,round:"",position:"bottom",onAfterLeave:o.afterLeave},{default:m((()=>[s.show.customColor||s.leaving.customColor?(c(),h(n,{key:0,value:s.cascaderValue.customColor,title:e.t("selectArea"),options:e.t("options"),"active-color":"#ee0a24",onClose:o.onClose,onFinish:o.onFinish},null,8,["value","title","options","onClose","onFinish"])):p("v-if",!0)])),_:1},8,["show","onAfterLeave"])])),_:1},8,["title"]),v(d,{title:e.t("asyncOptions")},{default:m((()=>[v(i,{value:s.fieldValue.asyncOptions,"model-value":s.fieldValue.asyncOptions,"is-link":"",readonly:o.isMp,label:e.t("area"),placeholder:e.t("selectArea"),onClick:t[6]||(t[6]=e=>o.onClick("asyncOptions")),onClickInput:t[7]||(t[7]=e=>o.onClick("asyncOptions"))},null,8,["value","model-value","readonly","label","placeholder"]),v(r,{show:s.show.asyncOptions,round:"",position:"bottom",onAfterLeave:o.afterLeave},{default:m((()=>[s.show.asyncOptions||s.leaving.asyncOptions?(c(),h(n,{key:0,value:s.cascaderValue.asyncOptions,title:e.t("selectArea"),options:s.asyncStateOptions,onClose:o.onClose,onFinish:o.onFinish,onChange:o.loadDynamicOptions},null,8,["value","title","options","onClose","onFinish","onChange"])):p("v-if",!0)])),_:1},8,["show","onAfterLeave"])])),_:1},8,["title"]),v(d,{title:e.t("customFieldNames")},{default:m((()=>[v(i,{value:s.fieldValue.customFieldNames,"model-value":s.fieldValue.customFieldNames,"is-link":"",readonly:o.isMp,label:e.t("area"),placeholder:e.t("selectArea"),onClick:t[8]||(t[8]=e=>o.onClick("customFieldNames")),onClickInput:t[9]||(t[9]=e=>o.onClick("customFieldNames"))},null,8,["value","model-value","readonly","label","placeholder"]),v(r,{show:s.show.customFieldNames,round:"",position:"bottom",onAfterLeave:o.afterLeave},{default:m((()=>[s.show.customFieldNames||s.leaving.customFieldNames?(c(),h(n,{key:0,value:s.cascaderValue.customFieldNames,title:e.t("selectArea"),"field-names":s.fieldNames,options:o.customFieldOptions,onClose:o.onClose,onFinish:o.onFinish,onChange:o.loadDynamicOptions},null,8,["value","title","field-names","options","onClose","onFinish","onChange"])):p("v-if",!0)])),_:1},8,["show","onAfterLeave"])])),_:1},8,["title"])])}]]);export{P as default};
