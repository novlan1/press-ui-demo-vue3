import{C as t,_ as s,G as e,y as o,H as a,b as i,J as n,Q as l,af as r,a1 as c,o as d,c as u,B as h,I as m,h as p,z as y,e as f,v as C,t as b,j as k,F as g,w,d as I,k as _,aT as S}from"./index-7b185b18.js";const v={rootStyle:function(s){return t({color:s.color,"background-color":s.backgroundColor,background:s.background})}};const $=s({name:"PressNoticeBar",options:{...e,styleIsolation:"shared"},components:{PressIconPlus:o},props:{text:{type:String,default:""},mode:{type:String,default:""},url:{type:String,default:""},openType:{type:String,default:"navigate"},delay:{type:Number,default:1},speed:{type:Number,default:60},scrollable:{type:Boolean,default:!1},leftIcon:{type:String,default:""},color:{type:String,default:""},backgroundColor:{type:String,default:""},background:{type:String,default:""},wrapable:Boolean,...a},emits:["close","click"],data:()=>({show:!0,duration:0,animationDuration:0,contentWidth:0,translateX:0,isNotInUni:i()}),computed:{noticeBarClass(){const{mode:t,wrapable:s,customClass:e}=this;return`${e} ${n.bem2("notice-bar",{withicon:t,wrapable:s})}`},noticeBarStyle(){const{color:t,backgroundColor:s,background:e}=this;return v.rootStyle({color:t,backgroundColor:s,background:e})},animationStyle(){const{animationDuration:t,delay:s,translateX:e}=this;return[`transform: translateX(${e}px);`,`transition: -webkit-transform ${t}ms linear ${s}ms, transform ${t}ms linear ${s}ms;`,"transform-origin: 50% 50% 0px;"].join(" ")},leftIconClass:()=>"press-notice-bar__left-icon",leftIconCustomClass:()=>"",rightIconClass:()=>"press-notice-bar__right-icon",rightIconCustomClass:()=>""},watch:{text:{handler(){this.init()}},speed:{handler(){this.init()}}},created(){},mounted(){this.init()},destroyed(){this.onDestroyed()},unmounted(){this.onDestroyed()},methods:{onDestroyed(){this.timer&&clearTimeout(this.timer)},init(){l((()=>{Promise.all([r(this,".press-notice-bar__content"),r(this,".press-notice-bar__wrap")]).then((t=>{const[s,e]=t,{speed:o,scrollable:a}=this;if(null!=s&&null!=e&&s.width&&e.width&&!1!==a&&(a||e.width<s.width)){const t=(e.width+s.width)/o*1e3;this.wrapWidth=e.width,this.contentWidth=s.width,this.duration=t,this.scroll(!0)}}))}))},scroll(t=!1){this.timer&&clearTimeout(this.timer),this.timer=null,this.translateX=t?0:this.wrapWidth,this.animationDuration=0,l((()=>{this.translateX=-this.contentWidth,this.animationDuration=this.duration})),this.timer=setTimeout((()=>{this.scroll()}),this.duration)},onClickIcon(t){"closeable"===this.mode&&(this.timer&&clearTimeout(this.timer),this.timer=null,this.show=!1,this.$emit("close",c(t)))},onClick(t){this.$emit("click",t)}}},[["render",function(t,s,e,o,a,i){const n=_("PressIconPlus"),l=S;return d(),u("div",{class:"press-notice-bar-index"},[a.show?(d(),u("div",{key:0,class:h(i.noticeBarClass),style:m(i.noticeBarStyle),onClick:s[0]||(s[0]=(...t)=>i.onClick&&i.onClick(...t))},[e.leftIcon?(d(),p(n,{key:0,name:e.leftIcon,class:h([i.leftIconClass]),"custom-class":i.leftIconCustomClass},null,8,["name","class","custom-class"])):y(t.$slots,"left-icon",{key:1},void 0,!0),f("div",{class:"press-notice-bar__wrap"},[f("div",{class:h("press-notice-bar__content "+(!1!==e.scrollable||e.wrapable?"":"press-ellipsis")),style:m(i.animationStyle)},[C(b(e.text)+" ",1),e.text?k("v-if",!0):y(t.$slots,"default",{key:0},void 0,!0)],6)]),"closeable"===e.mode?(d(),p(n,{key:2,class:h([i.rightIconClass]),"custom-class":i.rightIconCustomClass,name:"cross",onClick:i.onClickIcon},null,8,["class","custom-class","onClick"])):"link"===e.mode?(d(),u(g,{key:3},[a.isNotInUni?(d(),p(n,{key:0,class:h([i.rightIconClass]),"custom-class":i.rightIconCustomClass,name:"arrow"},null,8,["class","custom-class"])):(d(),p(l,{key:1,url:e.url,"open-type":e.openType},{default:w((()=>[I(n,{class:h([i.rightIconClass]),"custom-class":i.rightIconCustomClass,name:"arrow"},null,8,["class","custom-class"])])),_:1},8,["url","open-type"]))],64)):y(t.$slots,"right-icon",{key:4},void 0,!0)],6)):k("v-if",!0)])}],["__scopeId","data-v-32deefde"]]);export{$ as P};
