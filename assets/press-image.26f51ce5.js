import{_ as o,z as t,N as e,G as r,E as i,o as a,j as s,w as d,e as n,J as l,k as h,c as u,A as g,d as c,g as p,a6 as y,l as m}from"./index-a6ed3ec5.js";const w=o({name:"PressImage",options:{virtualHost:!0,styleIsolation:"shared"},components:{PressIconPlus:t,PressTransition:e},mixins:[{props:{src:{type:String,default:""},mode:{type:String,default:"scaleToFill"},width:{type:[String,Number],default:300},height:{type:[String,Number],default:225},round:{type:Boolean,default:!1},radius:{type:[String,Number],default:0},lazyLoad:{type:Boolean,default:!0},showMenuByLongpress:{type:Boolean,default:!0},loadingIcon:{type:String,default:"photo"},errorIcon:{type:String,default:"photo-fail"},showLoading:{type:Boolean,default:!0},showError:{type:Boolean,default:!0},fade:{type:Boolean,default:!0},webp:{type:Boolean,default:!1},duration:{type:[String,Number],default:500},backgroundColor:{type:String,default:"#f3f4f6"},customStyle:{type:String,default:""}}}],emits:["click","error","load"],data(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},computed:{wrapStyle(){const o={};o.width=r(this.width),o.height=r(this.height),o.borderRadius=this.round?"10000px":r(this.radius),o.overflow=this.borderRadius>0?"hidden":"visible";return i([{...o,...this.backgroundStyle},this.customStyle])}},watch:{src:{immediate:!0,handler(o){o?(this.isError=!1,this.loading=!0):this.isError=!0}}},mounted(){this.show=!0},methods:{addUnit:r,onClick(){this.$emit("click")},onErrorHandler(o){this.loading=!1,this.isError=!0,this.$emit("error",o)},onLoadHandler(o){this.loading=!1,this.isError=!1,this.$emit("load",o),this.removeBgColor()},removeBgColor(){this.backgroundStyle={backgroundColor:"transparent"}}}},[["render",function(o,t,e,r,i,w){const f=y,b=m("PressIconPlus"),k=m("PressTransition");return a(),s(k,{mode:"fade",show:i.show,duration:o.fade?i.durationTime:0,"custom-style":"display: inline-block;"},{default:d((()=>[n("div",{class:"press-image",style:l(w.wrapStyle),onClick:t[0]||(t[0]=p(((...o)=>w.onClick&&w.onClick(...o)),["stop"]))},[i.isError?h("v-if",!0):(a(),s(f,{key:0,src:o.src,mode:o.mode,"show-menu-by-longpress":o.showMenuByLongpress,"lazy-load":o.lazyLoad,class:"press-image__image",style:l({borderRadius:o.round?"10000px":w.addUnit(o.radius),width:w.addUnit(o.width),height:w.addUnit(o.height)}),onError:w.onErrorHandler,onLoad:w.onLoadHandler},null,8,["src","mode","show-menu-by-longpress","lazy-load","style","onError","onLoad"])),o.showLoading&&i.loading?(a(),u("div",{key:1,class:"press-image__loading",style:l({borderRadius:o.round?"50%":w.addUnit(o.radius),backgroundColor:o.backgroundColor,width:w.addUnit(o.width),height:w.addUnit(o.height)})},[g(o.$slots,"loading",{},(()=>[c(b,{name:o.loadingIcon,width:o.width,height:o.height},null,8,["name","width","height"])]),!0)],4)):h("v-if",!0),o.showError&&i.isError&&!i.loading?(a(),u("div",{key:2,class:"press-image__error",style:l({borderRadius:o.round?"50%":w.addUnit(o.radius),width:w.addUnit(o.width),height:w.addUnit(o.height)})},[g(o.$slots,"error",{},(()=>[c(b,{name:o.errorIcon,width:o.width,height:o.height},null,8,["name","width","height"])]),!0)],4)):h("v-if",!0)],4)])),_:3},8,["show","duration"])}],["__scopeId","data-v-9b6d625d"]]);export{w as P};
