import{u as t,_ as s,x as o,q as e,y as a,l as i,z as n,H as l,J as r,$ as c,o as u,c as d,n as h,b as m,f as p,r as y,a as b,h as f,t as C,d as k,F as g,j as w,i as I,e as _,b0 as S}from"./index-e317c8c7.js";const $={rootStyle:function(s){return t({color:s.color,"background-color":s.backgroundColor,background:s.background})}};const v=s({name:"PressNoticeBar",options:{...o,styleIsolation:"shared"},components:{PressIconPlus:e},props:{text:{type:String,default:""},mode:{type:String,default:""},url:{type:String,default:""},openType:{type:String,default:"navigate"},delay:{type:Number,default:1},speed:{type:Number,default:60},scrollable:{type:Boolean,default:!1},leftIcon:{type:String,default:""},color:{type:String,default:""},backgroundColor:{type:String,default:""},background:{type:String,default:""},wrapable:Boolean,...a},emits:["close","click"],data:()=>({show:!0,duration:0,animationDuration:0,contentWidth:0,translateX:0,isNotInUni:i()}),computed:{noticeBarClass(){const{mode:t,wrapable:s,customClass:o}=this;return`${o} ${n.bem2("notice-bar",{withicon:t,wrapable:s})}`},noticeBarStyle(){const{color:t,backgroundColor:s,background:o}=this;return $.rootStyle({color:t,backgroundColor:s,background:o})},animationStyle(){const{animationDuration:t,delay:s,translateX:o}=this;return[`transform: translateX(${o}px);`,`transition: -webkit-transform ${t}ms linear ${s}ms, transform ${t}ms linear ${s}ms;`,"transform-origin: 50% 50% 0px;"].join(" ")},leftIconClass:()=>"press-notice-bar__left-icon",leftIconCustomClass:()=>"",rightIconClass:()=>"press-notice-bar__right-icon",rightIconCustomClass:()=>""},watch:{text:{handler(){this.init()}},speed:{handler(){this.init()}}},created(){},mounted(){this.init()},destroyed(){this.onDestroyed()},unmounted(){this.onDestroyed()},methods:{onDestroyed(){this.timer&&clearTimeout(this.timer)},init(){l((()=>{Promise.all([r(this,".press-notice-bar__content"),r(this,".press-notice-bar__wrap")]).then((t=>{const[s,o]=t,{speed:e,scrollable:a}=this;if(null!=s&&null!=o&&s.width&&o.width&&!1!==a&&(a||o.width<s.width)){const t=(o.width+s.width)/e*1e3;this.wrapWidth=o.width,this.contentWidth=s.width,this.duration=t,this.scroll(!0)}}))}))},scroll(t=!1){this.timer&&clearTimeout(this.timer),this.timer=null,this.translateX=t?0:this.wrapWidth,this.animationDuration=0,l((()=>{this.translateX=-this.contentWidth,this.animationDuration=this.duration})),this.timer=setTimeout((()=>{this.scroll()}),this.duration)},onClickIcon(t){"closeable"===this.mode&&(this.timer&&clearTimeout(this.timer),this.timer=null,this.show=!1,this.$emit("close",c(t)))},onClick(t){this.$emit("click",t)}}},[["render",function(t,s,o,e,a,i){const n=_("PressIconPlus"),l=S;return u(),d("div",{class:"press-notice-bar-index"},[a.show?(u(),d("div",{key:0,class:h(i.noticeBarClass),style:m(i.noticeBarStyle),onClick:s[0]||(s[0]=(...t)=>i.onClick&&i.onClick(...t))},[o.leftIcon?(u(),p(n,{key:0,name:o.leftIcon,class:h([i.leftIconClass]),"custom-class":i.leftIconCustomClass},null,8,["name","class","custom-class"])):y(t.$slots,"left-icon",{key:1},void 0,!0),b("div",{class:"press-notice-bar__wrap"},[b("div",{class:h("press-notice-bar__content "+(!1!==o.scrollable||o.wrapable?"":"press-ellipsis")),style:m(i.animationStyle)},[f(C(o.text)+" ",1),o.text?k("v-if",!0):y(t.$slots,"default",{key:0},void 0,!0)],6)]),"closeable"===o.mode?(u(),p(n,{key:2,class:h([i.rightIconClass]),"custom-class":i.rightIconCustomClass,name:"cross",onClick:i.onClickIcon},null,8,["class","custom-class","onClick"])):"link"===o.mode?(u(),d(g,{key:3},[a.isNotInUni?(u(),p(n,{key:0,class:h([i.rightIconClass]),"custom-class":i.rightIconCustomClass,name:"arrow"},null,8,["class","custom-class"])):(u(),p(l,{key:1,url:o.url,"open-type":o.openType},{default:w((()=>[I(n,{class:h([i.rightIconClass]),"custom-class":i.rightIconCustomClass,name:"arrow"},null,8,["class","custom-class"])])),_:1},8,["url","open-type"]))],64)):y(t.$slots,"right-icon",{key:4},void 0,!0)],6)):k("v-if",!0)])}],["__scopeId","data-v-a8606c27"]]);export{v as P};
