import{P as e}from"./press-popup.03ea07af.js";import{P as t}from"./press-switch.a2ab8044.js";import{P as i}from"./computed.c10c5649.js";import{f as s}from"./functional.ba0c2783.js";import{_ as o,o as c,q as n,w as l,c as p,p as a,n as r,x as d,t as h,F as u,i as m,f as C,v as k,e as P}from"./index-ea4fd344.js";const _={SWITCH:"switch",CHECKBOX:"checkbox",BUTTON:"button",TAB:"tab",CELL:"cell"};let x;const b=o({name:"PressPopupCell",options:{virtualHost:!0},components:{PressPopup:e,PressSwitch:t},mixins:[s({...i,tip:{type:String,default:""},cellList:{type:Array,default:()=>[]}})],props:{},emits:["click","cancel","confirm"],data(){return x=this,{POPUP_CELL_TPE_MAP:_,checkedIndexList:[]}},computed:{computedCellList(){return(this.getPropOrData("cellList")||[]).map(((e,t)=>"string"==typeof e.description?{...e,description:[{light:!1,content:e.description,uniqueKey:`${t}-desc-0`}]}:{...e,tabList:(e.tabList||[]).map(((e,i)=>({...e,uniqueKey:`${t}-tab-${i}`}))),description:(e.description||[]).map(((e,i)=>({...e,uniqueKey:`${t}-desc-${i}`})))}))}},watch:{cellList:{handler(){this.getCheckedList()},immediate:!0,deep:!0},functionModeData:{handler(){this.getCheckedList()},immediate:!0,deep:!0}},methods:{getCheckedList(){x=this;const e=(this.getPropOrData("cellList")||[]).map(((e,t)=>({...e,index:t}))).filter((e=>e.checked)).map((e=>e.index));this.checkedIndexList=e},emitClick({shouldEmitClick:e=!0,item:t,index:i,options:s={}}){const{click:o}=t,c={item:t,index:i,context:this,...s};"function"==typeof o&&o(c),e&&this.$emit("click",c)},onTabChange(e,t,i,s){this.emitClick({item:e,index:t,options:{tabItem:i,tabIndex:s}})},onClickDescription(e,t){this.emitClick({shouldEmitClick:!1,item:e,index:t,options:{}})},onCheckboxChange(e,t){const i=this.checkedIndexList.indexOf(t)>-1;this.emitClick({item:e,index:t,options:{value:!i}})},onSwitchChange(e,t){this.emitClick({item:this.computedCellList[t],index:t,options:{value:e}})},onClickCell(e,t){const{click:i}=e,{checkedIndexList:s}=this,o={item:e,index:t,context:this};if(e.type===_.CHECKBOX){const e=s.indexOf(t)>-1;o.value=e,this.checkedIndexList=e?s.filter((e=>e!==t)):s.concat([t]).sort()}"function"==typeof i&&i(o),this.$emit("click",o)},onClickBottomButton(){this.$emit("cancel",{context:this}),this.promiseCallback("cancel")},confirm(){this.$emit("confirm",{context:this}),this.promiseCallback("confirm",{checkedIndexList:this.checkedIndexList})},cancel(){this.$emit("cancel",{context:this}),this.promiseCallback("cancel",{checkedIndexList:this.checkedIndexList})},onAsyncConfirm(){const e=x.getPropOrData("asyncConfirm");return!e||e({checkedIndexList:x.checkedIndexList,context:x})}}},[["render",function(e,t,i,s,o,_){const x=P("PressSwitch"),b=P("PressPopup");return c(),n(b,{"is-show":e.innerShow,"show-title":e.getPropOrData("showTitle"),"close-icon":e.getPropOrData("closeIcon"),"arrow-icon":e.getPropOrData("arrowIcon"),title:e.getPropOrData("title"),button:e.getPropOrData("button"),"border-button":e.getPropOrData("borderButton"),"z-index":e.getPropOrData("zIndex"),"popup-class":e.getPropOrData("popupClass"),"close-on-click-overlay":e.getPropOrData("closeOnClickOverlay"),"custom-style":e.getPropOrData("customStyle"),"async-confirm":_.onAsyncConfirm,onConfirm:_.confirm,onCancel:_.cancel},{default:l((()=>[(c(!0),p(u,null,a(_.computedCellList,((e,t)=>(c(),p("div",{key:t,class:r(["press-popup-cell__item",{"press-popup-cell__item--switch":e.type===o.POPUP_CELL_TPE_MAP.SWITCH,"press-popup-cell__item--checkbox":e.type===o.POPUP_CELL_TPE_MAP.CHECKBOX,"press-popup-cell__item--button":e.type===o.POPUP_CELL_TPE_MAP.BUTTON}]),onClick:d((i=>_.onClickCell(e,t)),["stop"])},[e.type===o.POPUP_CELL_TPE_MAP.BUTTON?(c(),p("div",{key:0},h(e.label),1)):(c(),p(u,{key:1},[m("div",{class:"press-popup-cell__label"},[m("div",{class:"press-popup-cell__title"},h(e.label),1),e.description&&e.description.length?(c(),p("div",{key:0,class:"press-popup-cell__description-wrap"},[(c(!0),p(u,null,a(e.description,((t,i)=>(c(),p("span",{key:t.uniqueKey},[m("span",{class:r({"press-popup-cell__description":!0,"press-popup-cell__description--light":t.light}),onClick:d((s=>_.onClickDescription(t,i,e)),["stop"])},h(t.content),11,["onClick"])])))),128))])):C("v-if",!0)]),m("div",{class:"press-popup-cell__value"},[e.type===o.POPUP_CELL_TPE_MAP.SWITCH?(c(),n(x,{key:0,"custom-class":"press-switch--e-sport",open:e.open,disabled:e.disabled||!1,onChange:e=>_.onSwitchChange(e,t)},null,8,["open","disabled","onChange"])):e.type===o.POPUP_CELL_TPE_MAP.TAB?(c(),p("div",{key:1,class:"press-popup-cell__tabs"},[(c(!0),p(u,null,a(e.tabList,((i,s)=>(c(),p("div",{key:i.uniqueKey,class:r(["press-popup-cell__tab",{"press-popup-cell__tab--active":e.active===i.value}]),onClick:d((o=>_.onTabChange(e,t,i,s)),["stop"])},h(i.label),11,["onClick"])))),128))])):e.type===o.POPUP_CELL_TPE_MAP.CHECKBOX?(c(),p("div",{key:2,class:r(["press-popup-cell__checkbox",{"press-popup-cell__checkbox--checked":o.checkedIndexList.indexOf(t)>-1}]),onClick:d((i=>_.onCheckboxChange(e,t)),["stop"])},null,10,["onClick"])):(c(),p(u,{key:3},[k(h(e.value)+" ",1),m("div",{class:"iconfont icon-back"})],64))])],64))],10,["onClick"])))),128)),e.getPropOrData("tip")?(c(),p("div",{key:0,class:"press-popup-cell__tip"},h(e.getPropOrData("tip")),1)):C("v-if",!0),e.getPropOrData("bottomButton")?(c(),p("div",{key:1,class:"press-popup-cell__bottom-button",onClick:t[0]||(t[0]=d(((...e)=>_.onClickBottomButton&&_.onClickBottomButton(...e)),["stop"]))},h(e.getPropOrData("bottomButton")),1)):C("v-if",!0)])),_:1},8,["is-show","show-title","close-icon","arrow-icon","title","button","border-button","z-index","popup-class","close-on-click-overlay","custom-style","async-confirm","onConfirm","onCancel"])}],["__scopeId","data-v-2d99ce95"]]);export{b as P};
