import{_ as t,o as e,c as s,m as i,k as o,t as n,F as a,l as r,j as l,w as m,d as c}from"./index-7a15811b.js";import{a as u,P as d}from"./press-grid-item.19ca22c3.js";import{a as h,b as p}from"./index.c3cab6cb.js";import"./utils.f8cec38d.js";import"./add-unit.e5b08e9d.js";import"./press-component.fd531b70.js";import"./relation.25345683.js";import"./parent-map.b443f4cc.js";import"./press-icon-plus.eb48dd73.js";import"./press-info.b7012b43.js";import"./link.d4e234c5.js";function f(t,e=2){let s=`${t}`;for(;s.length<e;)s=`0${s}`;return s}const y=1e3,D=6e4,S=36e5,C=24*S;function k(t){return{days:Math.floor(t/C),hours:Math.floor(t%C/S),minutes:Math.floor(t%S/D),seconds:Math.floor(t%D/y),milliseconds:Math.floor(t%y)}}function g(t){return setTimeout(t,30)}const x=t({i18n:{"zh-CN":{millisecond:"毫秒级渲染",customStyle:"自定义样式",customFormat:"自定义格式",manualControl:"手动控制",formatWithDay:"DD 天 HH 时 mm 分 ss 秒",reset:"重置",pause:"暂停",start:"开始",finished:"倒计时结束"},"en-US":{millisecond:"Millisecond",customStyle:"Custom Style",customFormat:"Custom Format",manualControl:"Manual Control",formatWithDay:"DD Day, HH:mm:ss",reset:"Reset",pause:"Pause",start:"Start",finished:"Finished"}},components:{PressCountDown:t({name:"PressCountDown",props:{useSlot:Boolean,millisecond:Boolean,time:{type:Number,default:0},format:{type:String,default:"HH:mm:ss"},autoStart:{type:Boolean,default:!0}},emits:["change","finish"],data:()=>({formattedTime:"0",remain:0}),computed:{timeData(){return k(this.remain)}},watch:{time:{handler(t){const{remain:e,millisecond:s}=this;(s||Math.floor(t/1e3)!==Math.floor(e/1e3)&&Math.round(t/1e3)!==Math.round(e/1e3))&&this.reset()},immediate:!0}},destroyed(){this.onDestroyed()},unmounted(){this.onDestroyed()},methods:{onDestroyed(){clearTimeout(this.tid),this.tid=null},start(){this.counting||(this.counting=!0,this.endTime=Date.now()+this.remain,this.tick())},pause(){this.counting=!1,clearTimeout(this.tid)},reset(){this.pause(),this.remain=this.time,this.setRemain(this.remain),this.autoStart&&this.start()},tick(){this.millisecond?this.microTick():this.macroTick()},microTick(){this.tid=g((()=>{this.setRemain(this.getRemain()),0!==this.remain&&this.microTick()}))},macroTick(){this.tid=g((()=>{const t=this.getRemain();var e,s;e=t,s=this.remain,(Math.floor(e/1e3)!==Math.floor(s/1e3)||0===t)&&this.setRemain(t),0!==this.remain&&this.macroTick()}))},getRemain(){return Math.max(this.endTime-Date.now(),0)},setRemain(t){this.remain=t;const e=k(t);this.useSlot&&this.$emit("change",e),this.formattedTime=function(t,e){const{days:s}=e;let{hours:i,minutes:o,seconds:n,milliseconds:a}=e;return-1===t.indexOf("DD")?i+=24*s:t=t.replace("DD",f(s)),-1===t.indexOf("HH")?o+=60*i:t=t.replace("HH",f(i)),-1===t.indexOf("mm")?n+=60*o:t=t.replace("mm",f(o)),-1===t.indexOf("ss")?a+=1e3*n:t=t.replace("ss",f(n)),t.replace("SSS",f(a,3))}(this.format,e),0===t&&(this.pause(),this.$emit("finish"))}}},[["render",function(t,l,m,c,u,d){return e(),s("div",{class:"press-count-down"},[m.useSlot?i(t.$slots,"default",{key:0,timeData:d.timeData},(()=>[o("span",null,n(u.formattedTime),1)]),!0):(e(),s(a,{key:1},[r(n(u.formattedTime),1)],64))])}],["__scopeId","data-v-0d7d6b00"]]),PressGrid:u,PressGridItem:d},data:()=>({time:108e6,sectionStyle:"margin: 0 12px 20px;"}),methods:{onChange(){},start(){const t=h(this,"#controlCountDown");p(t,null,"start")},pause(){const t=h(this,"#controlCountDown");p(t,null,"pause")},reset(){const t=h(this,"#controlCountDown");p(t,null,"reset")},finished(){}}},[["render",function(t,i,a,r,u,d){const h=c("press-count-down"),p=c("demo-block"),f=c("press-grid-item"),y=c("press-grid");return e(),s("div",{class:"demo-wrap"},[l(p,{title:t.t("basicUsage"),"section-style":u.sectionStyle},{default:m((()=>[l(h,{time:u.time},null,8,["time"])])),_:1},8,["title","section-style"]),l(p,{title:t.t("customFormat"),"section-style":u.sectionStyle},{default:m((()=>[l(h,{time:u.time,format:t.t("formatWithDay")},null,8,["time","format"])])),_:1},8,["title","section-style"]),l(p,{title:t.t("millisecond"),"section-style":u.sectionStyle},{default:m((()=>[l(h,{time:u.time,millisecond:"",format:"HH:mm:ss:SSS"},null,8,["time"])])),_:1},8,["title","section-style"]),l(p,{title:t.t("customStyle"),"section-style":u.sectionStyle},{default:m((()=>[l(h,{"use-slot":"",time:u.time,onChange:d.onChange},{default:m((({timeData:t})=>[o("span",{class:"item"},n(t.hours),1),o("span",{class:"item"},n(t.minutes),1),o("span",{class:"item"},n(t.seconds),1)])),_:1},8,["time","onChange"])])),_:1},8,["title","section-style"]),l(p,{title:t.t("manualControl"),"section-style":u.sectionStyle},{default:m((()=>[l(h,{id:"controlCountDown",ref:"controlCountDown",millisecond:"",time:3e3,"auto-start":!1,format:"ss:SSS",onFinish:d.finished},null,8,["onFinish"])])),_:1},8,["title","section-style"]),l(y,{clickable:"","column-num":3},{default:m((()=>[l(f,{text:t.t("start"),icon:"play-circle-o",onClick:d.start},null,8,["text","onClick"]),l(f,{text:t.t("pause"),icon:"pause-circle-o",onClick:d.pause},null,8,["text","onClick"]),l(f,{text:t.t("reset"),icon:"replay",onClick:d.reset},null,8,["text","onClick"])])),_:1})])}],["__scopeId","data-v-ade6297c"]]);export{x as default};
