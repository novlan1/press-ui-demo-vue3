import{_ as t,o as e,c as i,F as s,p as n,j as o,t as a,f as r,h as l,n as d,I as u}from"./index-208ac2ea.js";import{a as p}from"./add-unit.25ae46a3.js";import{n as c}from"./test.b328066d.js";import{n as h}from"./adapter.ae497628.js";const m=t({name:"PressCodeInput",mixins:[{props:{adjustPosition:{type:Boolean,default:!0},maxLength:{type:[String,Number],default:6},dot:{type:Boolean,default:!1},mode:{type:String,default:"box"},hairline:{type:Boolean,default:!1},space:{type:[String,Number],default:10},value:{type:[String,Number],default:""},focus:{type:Boolean,default:!1},bold:{type:Boolean,default:!1},color:{type:String,default:"#606266"},fontSize:{type:[String,Number],default:18},size:{type:[String,Number],default:35},disabledKeyboard:{type:Boolean,default:!1},borderColor:{type:String,default:"#c9cacc"},disabledDot:{type:Boolean,default:!0}}}],emits:["change","finish","input","click","click-input"],data(){return{inputValue:"",isFocus:this.focus}},computed:{codeLength(){return new Array(Number(this.maxLength))},itemStyle(){return t=>{const e={width:p(this.size),height:p(this.size)};return"box"===this.mode&&(e.border=`${this.hairline?.5:1}px solid ${this.borderColor}`,0===function(t,e=!1){return c(`${t}`)?e?`${t}px`:Number(t):/(rpx|upx)$/.test(`${t}`)?e?`${uni.upx2px(parseInt(`${t}`))}px`:Number(uni.upx2px(parseInt(`${t}`))):e?`${parseInt(`${t}`)}px`:parseInt(`${t}`)}(this.space)&&(0===t&&(e.borderTopLeftRadius="3px",e.borderBottomLeftRadius="3px"),t===this.codeLength.length-1&&(e.borderTopRightRadius="3px",e.borderBottomRightRadius="3px"),t!==this.codeLength.length-1&&(e.borderRight="none"))),t!==this.codeLength.length-1?e.marginRight=p(this.space):e.marginRight=0,e}},codeArray(){return String(this.inputValue).split("")},lineStyle(){const t={};return t.height=this.hairline?"2px":"4px",t.width=p(this.size),t.backgroundColor=this.borderColor,t}},watch:{value:{immediate:!0,handler(t){this.inputValue=String(t).substring(0,this.maxLength)||""}}},methods:{addUnit:p,inputHandler(t){const{value:e}=t.detail||t.target;this.inputValue=e,this.disabledDot&&h((()=>{this.inputValue=e.replace(".","")})),this.$emit("change",e),this.$emit("input",e),String(e).length>=Number(this.maxLength)&&this.$emit("finish",e)},clickWrap(){this.$emit("click")},clickInput(){this.$emit("click-input")}}},[["render",function(t,p,c,h,m,g){const y=u;return e(),i("div",{class:"press-code-input",onClick:p[2]||(p[2]=(...t)=>g.clickWrap&&g.clickWrap(...t))},[(e(!0),i(s,null,n(g.codeLength,((s,n)=>(e(),i("div",{key:n,class:"press-code-input__item",style:o([g.itemStyle(n)])},[t.dot&&g.codeArray.length>n?(e(),i("div",{key:0,class:"press-code-input__item__dot"})):(e(),i("span",{key:1,style:o({fontSize:g.addUnit(t.fontSize),fontWeight:t.bold?"bold":"normal",color:t.color})},a(g.codeArray[n]||""),5)),"line"===t.mode?(e(),i("div",{key:2,class:"press-code-input__item__line",style:o([g.lineStyle])},null,4)):r("v-if",!0),m.isFocus&&g.codeArray.length===n?(e(),i("div",{key:3,style:o({backgroundColor:t.color}),class:"press-code-input__item__cursor"},null,4)):r("v-if",!0)],4)))),128)),l(y,{disabled:t.disabledKeyboard,type:"number",focus:t.focus,value:m.inputValue,maxlength:t.maxLength,adjustPosition:t.adjustPosition,class:d(["press-code-input__input",{"press-code-input__input--disabled":t.disabledKeyboard}]),style:o({height:g.addUnit(t.size)}),onInput:g.inputHandler,onFocus:p[0]||(p[0]=t=>m.isFocus=!0),onBlur:p[1]||(p[1]=t=>m.isFocus=!1),onClick:g.clickInput},null,8,["disabled","focus","value","maxlength","adjustPosition","class","style","onInput","onClick"])])}],["__scopeId","data-v-c89d345a"]]);export{m as P};
