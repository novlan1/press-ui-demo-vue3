import{_ as e,v as t,A as i,o as s,c as n,F as o,k as a,b as r,t as l,d,i as u,n as p,X as c}from"./index-126da60a.js";import{n as h}from"./test.b328066d.js";const m=e({name:"PressCodeInput",mixins:[{props:{adjustPosition:{type:Boolean,default:!0},maxLength:{type:[String,Number],default:6},dot:{type:Boolean,default:!1},mode:{type:String,default:"box"},hairline:{type:Boolean,default:!1},space:{type:[String,Number],default:10},value:{type:[String,Number],default:""},focus:{type:Boolean,default:!1},bold:{type:Boolean,default:!1},color:{type:String,default:"#606266"},fontSize:{type:[String,Number],default:18},size:{type:[String,Number],default:35},disabledKeyboard:{type:Boolean,default:!1},borderColor:{type:String,default:"#c9cacc"},disabledDot:{type:Boolean,default:!0}}}],emits:["change","finish","input","click","click-input"],data(){return{inputValue:"",isFocus:this.focus}},computed:{codeLength(){return new Array(Number(this.maxLength))},itemStyle(){return e=>{const i={width:t(this.size),height:t(this.size)};return"box"===this.mode&&(i.border=`${this.hairline?.5:1}px solid ${this.borderColor}`,0===function(e,t=!1){return h(`${e}`)?t?`${e}px`:Number(e):/(rpx|upx)$/.test(`${e}`)?t?`${uni.upx2px(parseInt(`${e}`))}px`:Number(uni.upx2px(parseInt(`${e}`))):t?`${parseInt(`${e}`)}px`:parseInt(`${e}`)}(this.space)&&(0===e&&(i.borderTopLeftRadius="3px",i.borderBottomLeftRadius="3px"),e===this.codeLength.length-1&&(i.borderTopRightRadius="3px",i.borderBottomRightRadius="3px"),e!==this.codeLength.length-1&&(i.borderRight="none"))),e!==this.codeLength.length-1?i.marginRight=t(this.space):i.marginRight=0,i}},codeArray(){return String(this.inputValue).split("")},lineStyle(){const e={};return e.height=this.hairline?"2px":"4px",e.width=t(this.size),e.backgroundColor=this.borderColor,e}},watch:{value:{immediate:!0,handler(e){this.inputValue=String(e).substring(0,this.maxLength)||""}}},methods:{addUnit:t,inputHandler(e){const{value:t}=e.detail||e.target;this.inputValue=t,this.disabledDot&&i((()=>{this.inputValue=t.replace(".","")})),this.$emit("change",t),this.$emit("input",t),String(t).length>=Number(this.maxLength)&&this.$emit("finish",t)},clickWrap(){this.$emit("click")},clickInput(){this.$emit("click-input")}}},[["render",function(e,t,i,h,m,g){const b=c;return s(),n("div",{class:"press-code-input",onClick:t[2]||(t[2]=(...e)=>g.clickWrap&&g.clickWrap(...e))},[(s(!0),n(o,null,a(g.codeLength,((t,i)=>(s(),n("div",{key:i,class:"press-code-input__item",style:r([g.itemStyle(i)])},[e.dot&&g.codeArray.length>i?(s(),n("div",{key:0,class:"press-code-input__item__dot"})):(s(),n("span",{key:1,style:r({fontSize:g.addUnit(e.fontSize),fontWeight:e.bold?"bold":"normal",color:e.color})},l(g.codeArray[i]||""),5)),"line"===e.mode?(s(),n("div",{key:2,class:"press-code-input__item__line",style:r([g.lineStyle])},null,4)):d("v-if",!0),m.isFocus&&g.codeArray.length===i?(s(),n("div",{key:3,style:r({backgroundColor:e.color}),class:"press-code-input__item__cursor"},null,4)):d("v-if",!0)],4)))),128)),u(b,{disabled:e.disabledKeyboard,type:"number",focus:e.focus,value:m.inputValue,maxlength:e.maxLength,adjustPosition:e.adjustPosition,class:p(["press-code-input__input",{"press-code-input__input--disabled":e.disabledKeyboard}]),style:r({height:g.addUnit(e.size)}),onInput:g.inputHandler,onFocus:t[0]||(t[0]=e=>m.isFocus=!0),onBlur:t[1]||(t[1]=e=>m.isFocus=!1),onClick:g.clickInput},null,8,["disabled","focus","value","maxlength","adjustPosition","class","style","onInput","onClick"])])}],["__scopeId","data-v-e665dc8e"]]);export{m as P};
