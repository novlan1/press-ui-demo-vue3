import{s as e}from"./index.50de3878.js";import{i as s}from"./h5-handler.8bc70c56.js";import{_ as t,o as a,q as i,w as o,i as r,c as n,t as l,f as c,n as p,x as m,h as g,p as h,F as d,j as u,e as v,X as w,Y as P}from"./index-ea4fd344.js";import{P as f}from"./press-overlay.94d366dc.js";import{P as y}from"./press-icon-plus.f1d8042d.js";import{f as C}from"./functional.ba0c2783.js";import{n as _}from"./add-unit.856043c8.js";import{S as I}from"./swiper.8cc302bc.js";const O={images:{type:Array,default:()=>[]},startPosition:{type:[Number,String],default:0},transition:{type:String,default:"press-fade"},showIndex:{type:Boolean,default:!0},asyncClose:{type:Boolean,default:!1},customStyle:{type:String,default:""},customClass:{type:String,default:""},closeable:{type:Boolean,default:!1},closeIcon:{type:String,default:"clear"},closeIconPosition:{type:String,default:"top-right"},zIndex:{type:Number,default:10}};const S=t({name:"PressImagePreview",components:{PressOverlay:f,PressIconPlus:y},mixins:[C(O),I],props:{...O},emits:["close","change"],data:()=>({active:0}),computed:{imagePreviewStyle(){return this.getPropOrData("customStyle")}},watch:{startPosition:"setActive",show(e){e?(this.setActive(+this.getPropOrData("startPosition")),_((()=>{}))):this.$emit("close",{index:this.active,url:this.getPropOrData("images")[this.active]})}},mounted(){},methods:{showImagePreview(e){this.showDialog(e),this.setActive(e.startPosition||0)},onClosed(){},onChange(e){const{current:s=0}=e.detail;this.setActive(s)},emitClose(){this.getPropOrData("asyncClose")?this.promiseCallback("cancel"):(this.$emit("close"),this.innerShow=!1,this.promiseCallback("confirm"))},onClose(){this.emitClose()},onClickOverlay(){this.onClose()},onClickSwiperItem(){this.onClose()},setActive(e){e!==this.active&&(this.active=e,this.$emit("change",e))}}},[["render",function(e,s,t,f,y,C){const _=v("PressIconPlus"),I=w,O=P,S=v("PressOverlay");return a(),i(S,{show:e.innerShow,"custom-style":`background: rgba(0, 0, 0, 0.9);z-index: ${e.getPropOrData("zIndex")};`,onClick:C.onClickOverlay},{default:o((()=>[r("div",{class:p(["press-image-preview",[e.getPropOrData("customClass")]]),style:u(C.imagePreviewStyle)},[e.getPropOrData("showIndex")?(a(),n("div",{key:0,class:"press-image-preview__index"},l(y.active+1)+"/"+l(e.getPropOrData("images").length),1)):c("v-if",!0),r("div",{class:p(["press-image-preview__close-icon",`press-image-preview__close-icon--${e.getPropOrData("closeIconPosition")}`]),onClick:s[0]||(s[0]=m(((...e)=>C.onClose&&C.onClose(...e)),["stop"]))},[e.getPropOrData("closeable")?(a(),i(_,{key:0,name:e.getPropOrData("closeIcon")},null,8,["name"])):c("v-if",!0)],2),g(O,{class:"press-image-preview__swipe",current:y.active,onChange:C.onChange},{default:o((()=>[(a(!0),n(d,null,h(e.getPropOrData("images"),((e,s)=>(a(),i(I,{key:s,class:"press-image-preview__swipe-item",onClick:C.onClickSwiperItem},{default:o((()=>[r("div",{class:"press-image-preview__image-wrap"},[r("img",{class:"press-image-preview__image",src:e,fit:"contain"},null,8,["src"])])])),_:2},1032,["onClick"])))),128))])),_:1},8,["current","onChange"]),r("div")],6)])),_:1},8,["show","custom-style","onClick"])}],["__scopeId","data-v-0ab4eb5d"]]);function k(t){let a;return t.selector||(a=s(S,"pressImagePreview"),a.mode="functional"),e({...t,dialog:a,show:!0,showFunction:"showImagePreview"})}const D=k;export{S as I,k as a,D as i};
