import{l as e}from"./little-loader.a4dfa947.js";var i={};function o(){return(navigator.userAgent||"").toLowerCase()}function n(){var e=o();return/iphone|ipod|ipad|Mac OS X/i.test(e)||!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}function s(){var e=o(),i=-1!==e.indexOf("micromessenger"),s=-1!==e.indexOf("wxwork"),d=-1!==e.indexOf(" qq/"),t=-1!==e.indexOf(" igameapp/"),l=-1!==e.indexOf(" gamelife/"),r=-1!==e.indexOf("android"),a=n(),c=a,w=-1!==e.indexOf(" msdk/"),f=-1!==e.indexOf(" webviewx msdk/"),u=-1!==e.indexOf(" msdk/5"),m=-1!==e.indexOf("ingame"),v=w||m,k=-1!==e.indexOf("gamehelper"),p=-1!==e.indexOf("gamehelper_20004"),b=-1!==e.indexOf("miniprogram")||"undefined"!=typeof window&&"miniprogram"===window.__wxjs_environment,M=-1!==e.indexOf("lolapp"),S=/(?:Windows Phone)/.test(e);return{isWeixin:i,isWorkWeixin:s,isQQ:d,isPvpApp:t,isTipApp:l,isAndroid:r,isIos:a,isIOS:c,isMsdk:w,isMsdkX:f,isMsdkV5:u,isSlugSdk:m,isInGame:v,isGHelper:k,isGHelper20004:p,isMiniProgram:b,isLolApp:M,isWindowsPhone:S,isSymbian:/(?:SymbianOS)/.test(e)||S,isPc:!e.match(/(phone|pad|pod|iphone|ipod|ios|ipad|android|mobile|blackberry|iemobile|mqqbrowser|juc|fennec|wosbrowser|browserng|webos|symbian|windows phone)/i)}}Object.defineProperty(i,"__esModule",{value:!0});i.checkNodeEnv=function(){return!("undefined"!=typeof window&&window.navigator)},i.checkUAIsIOS=n,i.getEnvUAType=s,i.initEnv=function(){return s()};var d={},t={};!function(e){function i(o){return e.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,i(o)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return t},set exports(e){t=e}}),Object.defineProperty(d,"__esModule",{value:!0});var l=i,r=e;function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=a(t);function w(e){if(e||(e=l.initEnv()),console.info("[closeMsdkWebview] env",e),e.isMsdkV5&&"function"==typeof window.msdkCall){window.msdkCall('{"MsdkMethod":"closeWebView"}')}else e.isMsdk?"function"==typeof window.msdkCloseWebview?(!e.isIOS||e.isIOS&&window.msdkiOSHandler)&&window.msdkCloseWebview():"function"==typeof window.msdkCallNative&&window.msdkCallNative('{"MsdkMethod":"CloseWebview"}'):e.isSlugSdk&&window.customBrowserInterface&&window.customBrowserInterface.closeWebview()}var f=function(e){var i,o;void 0===e&&(e=!0);var n=l.getEnvUAType(),s=n.isSlugSdk,d=n.isMsdkV5,t=n.isMsdk,r=n.isMsdkX,a=n.isAndroid;if(s){if("object"===c.default(window.customBrowserInterface)){var w=e?"hideUi":"showUi";window.customBrowserInterface[w]()}}else if(d){var f=JSON.stringify({MsdkMethod:"setFullScreen",isFullScreen:!!e});setTimeout((function(){var e,i;a?null===(e=window.msdkCall)||void 0===e||e.call(window,f):window.WebViewJavascriptBridge?null===(i=window.msdkCall)||void 0===i||i.call(window,f):document.addEventListener("WebViewJavascriptBridgeReady",(function(){var e;null===(e=window.msdkCall)||void 0===e||e.call(window,f)}),!1)}),100)}else if(t&&!r){var u=JSON.stringify({MsdkMethod:"WGSetFullScreen",isFullScreen:!!e});a?null===(i=window.msdkCall)||void 0===i||i.call(window,"WGSetFullScreen",u):window.WebViewJavascriptBridge?null===(o=window.msdkCall)||void 0===o||o.call(window,"WGSetFullScreen",u):document.addEventListener("WebViewJavascriptBridgeReady",(function(){var e;null===(e=window.msdkCall)||void 0===e||e.call(window,"WGSetFullScreen",u)}),!1)}};d.addMsdkNativeCallbackListener=function(e){var i=l.initEnv();i.isMsdk&&!i.isMsdkV5&&("function"==typeof window.setMsdkCallback?window.setMsdkCallback(e):"function"==typeof window.msdkAddNativeCallbackObserver&&window.msdkAddNativeCallbackObserver(e))},d.callJsBrowserAdapter=function(){return new Promise((function(e){var i=l.initEnv();i.isMsdkV5?r.loader("https://image-1251917893.file.myqcloud.com/igame/common/js/msdkJsAdapterV5.js",(function(){e(!0)})):i.isMsdk?i.isMsdkX?r.loader("https://image-1251917893.file.myqcloud.com/igame/common/js/msdkJsAdapterV3_embedded.js",(function(){e(!0)})):r.loader("https://image-1251917893.file.myqcloud.com/igame/common/js/msdkJsAdapterV3.js",(function(){e(!0)})):i.isSlugSdk&&r.loader("https://tiem-cdn.qq.com/slugteam/sdk/browser_adapt.js",(function(){e(!0)}))}))},d.callJsReSetFullScreen=function(){f(!1)},d.callJsSetFullScreen=f,d.closeMsdkWebview=w,d.closeWebView=function(){console.log("[closeWebView] call close webview");var e=l.initEnv();e.isMsdk?w():e.isSlugSdk?window.customBrowserInterface&&window.customBrowserInterface.closeWebview():(window.location.href="about:blank",console.log("[closeWebView] call close webview failed"))},d.removeMsdkNativeCallbackListener=function(e){var i=l.initEnv();i.isMsdk&&!i.isMsdkV5&&"function"==typeof window.msdkRemoveNativeCallbackObserver&&window.msdkRemoveNativeCallbackObserver(e)},d.sendToMsdkNative=function(e){void 0===e&&(e="");var i=l.initEnv();i.isMsdk&&!i.isMsdkV5?"function"==typeof window.msdkCallNative?window.msdkCallNative(e):"function"==typeof window.msdkCall&&window.msdkCall("WGSendMessageToNative",'{"MsdkMethod":"WGSendMessageToNative","MsgData":"'.concat(e,'"}')):i.isAndroid?confirm(e):i.isIOS&&(window.location.href=encodeURIComponent(e))};export{i as e,d as m};
