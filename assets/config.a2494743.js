import{D as e}from"./handler.5572dc7b.js";import{T as a}from"./index-a6ed3ec5.js";import{e as n,m as i,l as c}from"./msdk.a6eb30aa.js";import{t}from"./tslib.es6-579a804b.d71528da.js";var o={},r={};Object.defineProperty(r,"__esModule",{value:!0});var l=function(e){return Object.prototype.toString.call(e).slice(8,-1)},p=function(e){return"Object"===l(e)},s=function(e){return p(e)||Array.isArray(e)};r.merge=function e(a){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];for(var c=0,t=n;c<t.length;c++){var o=t[c];for(var r in o)void 0===o[r]&&r in a||(s(o[r])&&s(a[r])&&l(a[r])===l(o[r])?p(a[r])?e(a[r],o[r]):a[r]=a[r].concat(o[r]):a[r]=o[r])}return a};var d={};Object.defineProperty(d,"__esModule",{value:!0});var m=t,A=r,M=n,u=i,h=c;function k(e){e&&((window!==top&&top?top:window).location.href=e)}function P(e){var a=e.successCallback,n=e.failCallback,i=e.delay,c=void 0===i?3500:i,t=!1,o="hidden";"hidden"in document?o="hidden":"webkitHidden"in document?o="webkitHidden":"mozHidden"in document&&(o="mozHidden");var r=o.replace(/hidden/i,"visibilitychange"),l=function(){document[o]&&(t=!0,null==a||a())};document.removeEventListener(r,l),document.addEventListener(r,l),setTimeout((function(){t||null==n||n(),document.removeEventListener(r,l)}),c)}function G(e){var a=e.successCallback,n=e.failCallback,i=e.maxTime,c=void 0===i?3e3:i,t=Date.now(),o="hidden";"hidden"in document?o="hidden":"webkitHidden"in document?o="webkitHidden":"mozHidden"in document&&(o="mozHidden");var r=0,l=setInterval((function(){r+=1;var e=Date.now()-t;(r>=100||e>c)&&(clearInterval(l),e>c||document[o]?null==a||a():null==n||n())}),20)}d.launchApp=function(e){var a;void 0===e&&(e={}),null===(a=null==e?void 0:e.Toast)||void 0===a||a.showLoading("启动中...");var n=M.initEnv(),i=A.merge({},{isUseSchemeParams:!1,appid:"",weixinScheme:"",browserAppScheme:"",browserApkScheme:"",qqAppScheme:"",qqAppPackageName:"",openMarket:!1,appMarketUrl:"",apkMarketUrl:"",needRedirect:!1,redirectUrl:"",failTips:"",failCallback:null,successCallback:null},m.__assign({env:n},e));console.log("[params]",i),console.log("[env]",n);var c=i.failCallback,t=i.successCallback,o=function(){var a,t,o;console.log("[launchApp] onFailHandler"),null===(a=null==e?void 0:e.Toast)||void 0===a||a.dismissLoading(),c?c():i.openMarket?(n.isIOS?i.appMarketUrl&&(window.location.href=i.appMarketUrl):i.apkMarketUrl&&(window.location.href=i.apkMarketUrl),n.isWeixin&&!n.isMiniProgram&&P({successCallback:function(){},failCallback:function(){var a,n;i.failTips&&(null===(n=null===(a=e.Dialog)||void 0===a?void 0:a.showTipsDialog)||void 0===n||n.call(a,i.failTips))},delay:2e3})):i.needRedirect?i.redirectUrl&&(window.location.href=i.redirectUrl):""!==i.failTips&&(null===(o=null===(t=e.Dialog)||void 0===t?void 0:t.showTipsDialog)||void 0===o||o.call(t,i.failTips))};i.failCallback=o,i.successCallback=function(){var a;null===(a=null==e?void 0:e.Toast)||void 0===a||a.dismissLoading(),console.log("[launchApp] onSuccHandler"),null==t||t()},n.isInGame?u.closeWebView():n.isWeixin&&!n.isMiniProgram?function(e){var a=e.appid,n=e.weixinScheme,i=e.successCallback,c=e.failCallback,t={schemeUrl:n,appID:a},o=function(e){var a;console.log("[launchInWeiXin] result",{res:e}),-1!==(null===(a=null==e?void 0:e.err_msg)||void 0===a?void 0:a.indexOf("ok"))?null==i||i():null==c||c()},r=function(){console.log("onBridgeReady..."),h.loader("https://image-1251917893.file.myqcloud.com/commjs/jweixin-1.6.0.js",(function(){var e;console.log("[onBridgeReady]"),null===(e=window.WeixinJSBridge)||void 0===e||e.invoke("launchApplication",t,o)}))};void 0===window.WeixinJSBridge?(console.log("WeixinJSBridge undefined"),document.addEventListener?document.addEventListener("WeixinJSBridgeReady",r,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",r),document.attachEvent("onWeixinJSBridgeReady",r))):(console.log("WeixinJSBridge not undefined"),r())}(i):n.isWeixin&&n.isMiniProgram?o():n.isQQ?function(e){var a=e.env,n=e.isUseSchemeParams,i=e.qqAppScheme,c=e.qqAppPackageName,t=e.successCallback,o=e.failCallback,r=function(){P({successCallback:t,failCallback:o})};n?(k(i),r()):h.loader("https://pub.idqqimg.com/qqmobile/qqapi.js?_bid=152",(function(){var e=a.isIos?i:c;window.mqq.app.launchApp(e),r()}))}(i):n.isAndroid?function(e){var a=e.browserApkScheme,n=e.successCallback,i=e.failCallback,c=document.createElement("div");c.style.visibility="hidden",c.innerHTML='<iframe id="scheme" src="'.concat(a,'" scrolling="no" width="1" height="1"></iframe>'),document.body.appendChild(c),G({successCallback:n,failCallback:i})}(i):function(e){var a=e.browserAppScheme,n=e.successCallback,i=e.failCallback;k(a),P({successCallback:n,failCallback:i})}(i)};var g={};Object.defineProperty(g,"__esModule",{value:!0});var f=g.GAME_MAP={PVP:{GID:331,APK_NAME:"com.tencent.tmgp.sgame"},GP:{GID:411,APK_NAME:"com.tencent.tmgp.pubgmhd"},HLDDZ:{GID:323,APK_NAME:"com.qqgame.hlddz"},MJ:{GID:304,APK_NAME:"com.qqgame.happymj"},LOLM:{GID:425,APK_NAME:"com.tencent.lolm"},NBA:{GID:406,APK_NAME:""},SJJQ:{GID:460,APK_NAME:""},LMJX:{GID:428,APK_NAME:""},TY:{GID:281,APK_NAME:"com.tencent.tmgp.wuxia"},TLBB:{GID:396,APK_NAME:"com.tencent.tmgp.tstl"},CF:{GID:2,APK_NAME:""},X5M:{GID:507,APK_NAME:"com.tencent.tmgp.qqx5"},NARUTO:{GID:334,APK_NAME:"com.tencent.KiHan"}};Object.defineProperty(o,"__esModule",{value:!0});var v=r,b=n,q=d,S=g;function _(e,a,n){if(n&&e[n])return e[n];var i=e.SCHEME_MAP||{};if(!i[a])return"";var c=i[a].default||"";return n&&i[a][n]||c}var D=function(e,a){var n=_(e,S.GAME_MAP.LOLM.GID);return a&&(n="".concat(n,"?linktype=H5&param1="),-1!==a.indexOf("test.igame.qq.com")?(n+=13e3,a=a.replace("https://test.igame.qq.com/tip/ingame-page/","")):-1!==a.indexOf("igame.qq.com")?(n+=13e3,a=a.replace("https://igame.qq.com/tip/ingame-page/","")):-1!==a.indexOf("h5.nes.slol.qq.com")?(n+=13002,a=a.replace("https://h5.nes.slol.qq.com/","")):-1!==a.indexOf("h5-test.nes.slol.qq.com")&&(n+=13003,a=a.replace("https://h5-test.nes.slol.qq.com/","")),n+="&param2=".concat(a)),n},E=function(e,a,n){void 0===n&&(n="");var i=b.initEnv(),c="";switch(a){case S.GAME_MAP.PVP.GID:c=_(e,S.GAME_MAP.PVP.GID,"community"),n&&(c="".concat(c,"?gamedata=JUMPX5_").concat(encodeURIComponent(n)));break;case S.GAME_MAP.GP.GID:c=_(e,S.GAME_MAP.GP.GID),n&&(c="".concat(c,"?exdata:method=open_url,url=").concat(encodeURIComponent(n),",force=1,dir=2,fullscreen=1"));break;case S.GAME_MAP.HLDDZ.GID:if(c=_(e,S.GAME_MAP.HLDDZ.GID,i.isIOS?"iOS":"android"),n){c="".concat(c).concat(i.isIOS?"&a=:/":"","&Operation=OpenGeneralURL&URL=").concat(n,"&Size=FullScreen&Mode=").concat("MSDK_EmbeddedWebView","&IsVideo=False&CheckGuest=True&InQueue=False&MultiInst=False")}break;case S.GAME_MAP.MJ.GID:c=_(e,S.GAME_MAP.MJ.GID);break;case S.GAME_MAP.LOLM.GID:c=D(e,n);break;case S.GAME_MAP.TY.GID:c=_(e,S.GAME_MAP.TY.GID);break;case S.GAME_MAP.TLBB.GID:c=_(e,S.GAME_MAP.TLBB.GID);break;case S.GAME_MAP.X5M.GID:c=_(e,S.GAME_MAP.X5M.GID)}return c};o.getOpenGameScheme=E;var w=o.gotoDzGame=function(e){void 0===e&&(e={});var a=e.pageUrl||"",n=E(e,S.GAME_MAP.HLDDZ.GID,a),i=S.GAME_MAP.HLDDZ.APK_NAME,c=v.merge({},{isUseSchemeParams:!0,weixinScheme:n,qqAppScheme:n,qqAppPackageName:i,browserAppScheme:n,browserApkScheme:n,openMarket:!1,needRedirect:!1,appMarketUrl:"https://itunes.apple.com/cn/app/id446324234",apkMarketUrl:"market://details?id=".concat(i),failTips:"可以微信搜索“欢乐斗地主”小程序，玩游戏累积战绩领奖"},e);q.launchApp(c)},I=o.gotoGPGame=function(e){void 0===e&&(e={});var a=e.pageUrl||"",n=E(e,S.GAME_MAP.GP.GID,a),i=S.GAME_MAP.GP.APK_NAME,c=v.merge({},{isUseSchemeParams:!0,weixinScheme:n,qqAppScheme:n,qqAppPackageName:i,browserAppScheme:n,browserApkScheme:n,openMarket:!1,needRedirect:!1,appMarketUrl:"https://itunes.apple.com/cn/app/id1321803705",apkMarketUrl:"market://details?id=".concat(i),failTips:"你还没有安装游戏哦，请安装“和平精英”，玩游戏累积战绩领奖"},e);q.launchApp(c)},U=o.gotoLOLMGame=function(e){void 0===e&&(e={});var a=D(e,e.pageUrl||""),n=S.GAME_MAP.LOLM.APK_NAME,i=v.merge({},{isUseSchemeParams:!0,weixinScheme:a,qqAppScheme:a,qqAppPackageName:n,browserAppScheme:a,browserApkScheme:a,openMarket:!1,needRedirect:!1,appMarketUrl:"https://apps.apple.com/cn/app/id1455054000",apkMarketUrl:"market://details?id=".concat(n),failTips:"你还没有安装游戏哦，请安装“英雄联盟手游”，玩游戏累积战绩领奖"},e);q.launchApp(i)},T=o.gotoMJGame=function(e){void 0===e&&(e={});var a=E(e,S.GAME_MAP.MJ.GID),n=a,i=S.GAME_MAP.MJ.APK_NAME,c=v.merge({},{weixinScheme:a,qqAppScheme:n,qqAppPackageName:i,browserAppScheme:a,browserApkScheme:a,openMarket:!1,needRedirect:!1,appMarketUrl:"https://itunes.apple.com/cn/app/id689180123",apkMarketUrl:"market://details?id=".concat(i),failTips:"你还没有安装游戏哦，请安装“欢乐麻将”，玩游戏累积战绩领奖"},e);q.launchApp(c)},L=o.gotoNarutoGame=function(e){void 0===e&&(e={});var a=_(e,S.GAME_MAP.NARUTO.GID),n=S.GAME_MAP.NARUTO.APK_NAME,i=v.merge({},{isUseSchemeParams:!1,weixinScheme:a,qqAppScheme:a,qqAppPackageName:n,browserAppScheme:a,browserApkScheme:a,openMarket:!1,needRedirect:!1,appMarketUrl:"https://apps.apple.com/cn/app/id955396648",apkMarketUrl:"market://details?id=".concat(n),failTips:"可以微信搜索“火影忍者”小程序，玩游戏累积战绩领奖"},e);q.launchApp(i)},N=o.gotoTDGame=function(e){void 0===e&&(e={});var a=E(e,S.GAME_MAP.TY.GID),n=a,i=S.GAME_MAP.TY.APK_NAME,c=v.merge({},{weixinScheme:a,qqAppScheme:n,qqAppPackageName:i,browserAppScheme:a,browserApkScheme:a,openMarket:!1,needRedirect:!1,appMarketUrl:"",apkMarketUrl:"market://details?id=".concat(i),failTips:"你还没有安装游戏哦，请安装“天涯明月刀”，玩游戏累积战绩领奖"},e);q.launchApp(c)},x=o.gotoTLBBGame=function(e){void 0===e&&(e={});var a=E(e,S.GAME_MAP.TLBB.GID),n=a,i=S.GAME_MAP.TLBB.APK_NAME,c=v.merge({},{weixinScheme:a,qqAppScheme:n,qqAppPackageName:i,browserAppScheme:a,browserApkScheme:a,openMarket:!1,needRedirect:!1,appMarketUrl:"https://itunes.apple.com/cn/app/id1132257692",apkMarketUrl:"market://details?id=".concat(i),failTips:"你还没有安装游戏哦，可以微信搜索“天龙八部”游戏"},e);q.launchApp(c)},C=o.gotoWzCommunity=function(e){void 0===e&&(e={});var a=b.initEnv(),n=e.pageUrl||"";if(""!==n){a.isAndroid&&(n=encodeURIComponent(n));var i=S.GAME_MAP.PVP.APK_NAME,c=E(e,S.GAME_MAP.PVP.GID,n),t=v.merge({},{isUseSchemeParams:!0,weixinScheme:c,qqAppScheme:c,qqAppPackageName:i,browserAppScheme:c,browserApkScheme:c,openMarket:!1,needRedirect:!1,appMarketUrl:"https://itunes.apple.com/cn/app/id989673964",apkMarketUrl:"market://details?id=".concat(i),failTips:"前往“王者荣耀-社区-发现-生活福利”，玩游戏累积战绩领奖"},e);q.launchApp(t)}else console.error("参数 pageUrl 为空")},O=o.gotoWzGame=function(e){void 0===e&&(e={});var a=S.GAME_MAP.PVP.APK_NAME,n=v.merge({},{weixinScheme:_(e,S.GAME_MAP.PVP.GID,"weixinScheme"),qqAppScheme:_(e,S.GAME_MAP.PVP.GID,"qqAppScheme"),qqAppPackageName:a,browserAppScheme:_(e,S.GAME_MAP.PVP.GID,"browserAppScheme"),browserApkScheme:_(e,S.GAME_MAP.PVP.GID,"browserApkScheme"),openMarket:!1,needRedirect:!1,appMarketUrl:"https://itunes.apple.com/cn/app/id989673964",apkMarketUrl:"market://details?id=".concat(a),failTips:"你还没有安装游戏哦，请安装“王者荣耀”，玩游戏累积战绩领奖"},e);q.launchApp(n)},B=o.gotoX5MGame=function(e){void 0===e&&(e={});var a=e.pageUrl||"",n=E(e,S.GAME_MAP.X5M.GID,a),i=S.GAME_MAP.X5M.APK_NAME,c=v.merge({},{isUseSchemeParams:!1,weixinScheme:n,qqAppScheme:n,qqAppPackageName:i,browserAppScheme:n,browserApkScheme:n,openMarket:!1,needRedirect:!1,appMarketUrl:"https://apps.apple.com/cn/app/id1219233424",apkMarketUrl:"market://details?id=".concat(i),failTips:"可以微信搜索“QQ炫舞”小程序，玩游戏累积战绩领奖"},e);q.launchApp(c)};const R={SCHEME_MAP:{[f.PVP.GID]:{default:"wx95a3a4d7c627e07d://",qqAppScheme:"tencent1104466820://",browserApkScheme:"smoba://",community:"tencentmsdk1104466820://"},[f.GP.GID]:{default:"pubgmhd1106467070://"},[f.HLDDZ.GID]:{default:"tencent363://",android:"qqgame.hlddz.scheme://",iOS:"tencent363://"},[f.MJ.GID]:{default:"happymjscheme://"},[f.LOLM.GID]:{default:"lolm://"},[f.TY.GID]:{default:"tencent1105636778://"},[f.TLBB.GID]:{default:"tencent1105245568://"},[f.X5M.GID]:{default:"tencent1105483033://"},[f.NARUTO.GID]:{default:"tencentmsdk1104307008://"}},redirectUrl:"https://baidu.com",appid:"wx3d0d33def060a347",Toast:{showLoading:e=>{a.loading({message:e,duration:0,forbidClick:!0})},dismissLoading:()=>{a.clear()}},Dialog:{showTipsDialog:a=>{e.show({title:"",content:a,cancelText:""})}}},y={WZ:{zh:"王者荣耀",en:"SMOBA",launchFunction:(e={})=>{O({...R,...e})}},WZ_COMMUNITY:{zh:"王者荣耀微社区",en:"SMOBA COMMUNITY",launchFunction:(e={})=>{C({pageUrl:"https://igame.qq.com/tip/ingame-page/ingame-pvp/index.html",...R,...e})}},GP:{zh:"和平精英",en:"GP",launchFunction:(e={})=>{I({...R,...e})}},DDZ:{zh:"斗地主",en:"DDZ",launchFunction:(e={})=>{w({...R,...e})}},MJ:{zh:"麻将",en:"MJ",launchFunction:(e={})=>{T({...R,...e})}},TLBB:{zh:"天龙八部",en:"TLBB",launchFunction:(e={})=>{x({...R,...e})}},TYMMD:{zh:"天涯明月刀",en:"TYMMD",launchFunction:(e={})=>{N({...R,...e})}},LOLM:{zh:"英雄联盟手游",en:"LOLM",launchFunction:(e={})=>{U({...R,...e})}},X5M:{zh:"QQ炫舞",en:"X5M",launchFunction:(e={})=>{const a={...R,...e};console.log("[allParams]",a),B(a)}},NARUTO:{zh:"火影忍者",en:"NARUTO",launchFunction:(e={})=>{L({...R,...e})}}},K={kEY:"SHOW_LAUNCH_APP",VALUE:"1"};export{y as G,K as L};
