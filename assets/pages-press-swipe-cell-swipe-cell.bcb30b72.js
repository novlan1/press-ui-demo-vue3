import{P as e,D as t}from"./handler.05548171.js";import{_ as s,x as o,y as i,o as n,c as l,b as a,f as c,a as r,n as h,w as d,e as p,F as f,i as g,j as C,r as m,t as u}from"./index-d9d977eb.js";import{r as v}from"./number.df2f0694.js";import{t as k}from"./touch.bcbb2f5b.js";import"./index.fb6ada4d.js";import"./handler-helper.33469563.js";import"./color.3a05f6e0.js";import"./press-popup-plus.5596c1e1.js";let w=[];const y=s({i18n:{"zh-CN":{select:"选择",delete:"删除",collect:"收藏",title:"单元格",confirm:"确定删除吗？",cardTitle:"商品标题",beforeClose:"异步关闭",customContent:"自定义内容"},"en-US":{select:"Select",delete:"Delete",collect:"Collect",title:"Cell",confirm:"Are you sure to delete?",cardTitle:"Title",beforeClose:"Before Close",customContent:"Custom Content"}},components:{PressSwipeCell:s({name:"PressSwipeCell",options:{...o},mixins:[k],props:{disabled:{type:Boolean,default:!1},leftWidth:{type:Number,default:0},rightWidth:{type:Number,default:0},asyncClose:{type:Boolean,default:!1},name:{type:String,default:""},...i},emits:["click","open","close"],data:()=>({catchMove:!1,wrapperStyle:"",offset:0}),watch:{leftWidth:{handler(e=0){this.offset>0&&this.swipeMove(e)}},rightWidth:{handler(e=0){this.offset<0&&this.swipeMove(-e)}}},created(){this.offset=0,w.push(this)},destroyed(){w=w.filter((e=>e!==this))},methods:{setData(e){Object.keys(e).forEach((t=>{this[t]=e[t]}))},open(e){const{leftWidth:t,rightWidth:s}=this,o="left"===e?t:-s;this.swipeMove(o),this.$emit("open",{position:e,name:this.name})},close(){this.swipeMove(0)},swipeMove(e=0){this.offset=v(e,-this.rightWidth,this.leftWidth);const t=`translate3d(${this.offset}px, 0, 0)`,s=this.dragging?"none":"transform .6s cubic-bezier(0.18, 0.89, 0.32, 1)";this.setData({wrapperStyle:`\n        -webkit-transform: ${t};\n        -webkit-transition: ${s};\n        transform: ${t};\n        transition: ${s};\n      `})},swipeLeaveTransition(){const{leftWidth:e,rightWidth:t}=this,{offset:s}=this;t>0&&-s>.3*t?this.open("right"):e>0&&s>.3*e?this.open("left"):this.swipeMove(0),this.setData({catchMove:!1})},startDrag(e){this.disabled||(this.startOffset=this.offset,this.touchStart(e))},noop(){},onDrag(e){this.disabled||(this.touchMove(e),"horizontal"===this.direction&&(this.dragging=!0,w.filter((e=>e!==this&&0!==e.offset)).forEach((e=>e.close())),this.setData({catchMove:!0}),this.swipeMove(this.startOffset+this.deltaX)))},endDrag(){this.disabled||(this.dragging=!1,this.swipeLeaveTransition())},onClick(e){const{key:t="outside"}=e.currentTarget.dataset;this.$emit("click",t),this.offset&&(this.asyncClose?this.$emit("close",{position:t,instance:this,name:this.name}):this.swipeMove(0))}}},[["render",function(e,t,s,o,i,g){return n(),l(f,null,[a(' @touchmove.stop.prevent="catchMove?noop:noop" '),c("div",{class:h(["press-swipe-cell",e.customClass]),"data-key":"cell",onClick:t[2]||(t[2]=d(((...e)=>g.onClick&&g.onClick(...e)),["stop","prevent"])),onTouchstart:t[3]||(t[3]=(...e)=>g.startDrag&&g.startDrag(...e)),onTouchmoveCapture:t[4]||(t[4]=(...e)=>g.onDrag&&g.onDrag(...e)),onTouchend:t[5]||(t[5]=(...e)=>g.endDrag&&g.endDrag(...e)),onTouchcancel:t[6]||(t[6]=(...e)=>g.endDrag&&g.endDrag(...e))},[c("div",{style:r(i.wrapperStyle),class:h(["press-swipe-cell__content",i.offset?"press-swipe-cell__content--moved":""])},[s.leftWidth?(n(),l("div",{key:0,class:"press-swipe-cell__left","data-key":"left",onClick:t[0]||(t[0]=d(((...e)=>g.onClick&&g.onClick(...e)),["stop","prevent"]))},[p(e.$slots,"left",{},void 0,!0)])):a("v-if",!0),p(e.$slots,"default",{},void 0,!0),s.rightWidth?(n(),l("div",{key:1,class:"press-swipe-cell__right","data-key":"right",onClick:t[1]||(t[1]=d(((...e)=>g.onClick&&g.onClick(...e)),["stop","prevent"]))},[p(e.$slots,"right",{},void 0,!0)])):a("v-if",!0)],6)],34)],2112)}],["__scopeId","data-v-fad89b14"]]),PressDialogPlus:e},data:()=>({asyncClose:!1}),methods:{onClick(e){console.log("onClick.val",e),this.onGTip(`click ${e}`)},onClose(...e){console.log("onClose.args",e),this.onGTip("close")},onOpen(e){console.log("onOpen.detail",e),this.onGTip(`[open] position: ${e.position}`)},onAsyncClose(e){console.log("onAsyncClose.detail",e);const{position:s,instance:o}=e;switch(s){case"left":case"cell":o.close();break;case"right":t.confirm({context:this,title:"确定删除吗？"}).then((()=>{console.log("1111"),o.close()})).catch((e=>{console.log("err",e)}))}}}},[["render",function(e,t,s,o,i,a){const r=m("PressSwipeCell"),h=m("demo-block");return n(),l("div",{class:"demo-wrap"},[g(h,{title:e.t("basicUsage"),"section-style":"margin:0;"},{default:C((()=>[g(r,{"right-width":65,"left-width":65,"async-close":i.asyncClose,onClick:a.onClick,onClose:a.onClose,onOpen:a.onOpen},{left:C((()=>[c("div",{class:"left"},u(e.t("select")),1)])),right:C((()=>[c("div",{class:"right"},u(e.t("delete")),1)])),default:C((()=>[c("div",{class:"content"},u(e.t("content")),1)])),_:1},8,["async-close","onClick","onClose","onOpen"])])),_:1},8,["title"]),g(h,{title:e.t("beforeClose"),"section-style":"margin:0;"},{default:C((()=>[g(r,{"right-width":65,"left-width":65,"async-close":!0,onClick:a.onClick,onClose:a.onAsyncClose,onOpen:a.onOpen},{left:C((()=>[c("div",{class:"left"},u(e.t("select")),1)])),right:C((()=>[c("div",{class:"right"},u(e.t("delete")),1)])),default:C((()=>[c("div",{class:"content"},u(e.t("content")),1)])),_:1},8,["onClick","onClose","onOpen"])])),_:1},8,["title"])])}],["__scopeId","data-v-8e1ae858"]]);export{y as default};
