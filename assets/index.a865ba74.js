import{s as e}from"./index.2e78a04a.js";import{ai as s,q as t,U as a,A as i,_ as o,o as r,f as n,j as l,a as c,c as p,t as m,d as g,n as d,w as h,i as u,k as v,F as w,b as P,e as f,aj as y,ak as C,al as _}from"./index-e317c8c7.js";import{S as I}from"./swiper.3eaab6f7.js";const k={images:{type:Array,default:()=>[]},startPosition:{type:[Number,String],default:0},transition:{type:String,default:"press-fade"},showIndex:{type:Boolean,default:!0},asyncClose:{type:Boolean,default:!1},customStyle:{type:String,default:""},customClass:{type:String,default:""},closeable:{type:Boolean,default:!1},closeIcon:{type:String,default:"clear"},closeIconPosition:{type:String,default:"top-right"},zIndex:{type:Number,default:10}};const O=o({name:"PressImagePreview",components:{PressOverlay:s,PressIconPlus:t},mixins:[a(k),I],props:{...k},emits:["close","change"],data:()=>({active:0}),computed:{imagePreviewStyle(){return this.getPropOrData("customStyle")}},watch:{startPosition:"setActive",show(e){e?(this.setActive(+this.getPropOrData("startPosition")),i((()=>{}))):this.$emit("close",{index:this.active,url:this.getPropOrData("images")[this.active]})}},mounted(){},methods:{showImagePreview(e){this.showDialog(e),this.setActive(e.startPosition||0)},onClosed(){},onChange(e){const{current:s=0}=e.detail;this.setActive(s)},emitClose(){this.getPropOrData("asyncClose")?this.promiseCallback("cancel"):(this.$emit("close"),this.innerShow=!1,this.promiseCallback("confirm"))},onClose(){this.emitClose()},onClickOverlay(){this.onClose()},onClickSwiperItem(){this.onClose()},setActive(e){e!==this.active&&(this.active=e,this.$emit("change",e))}}},[["render",function(e,s,t,a,i,o){const _=f("PressIconPlus"),I=y,k=C,O=f("PressOverlay");return r(),n(O,{show:e.innerShow,"custom-style":`background: rgba(0, 0, 0, 0.9);z-index: ${e.getPropOrData("zIndex")};`,onClick:o.onClickOverlay},{default:l((()=>[c("div",{class:d(["press-image-preview",[e.getPropOrData("customClass")]]),style:P(o.imagePreviewStyle)},[e.getPropOrData("showIndex")?(r(),p("div",{key:0,class:"press-image-preview__index"},m(i.active+1)+"/"+m(e.getPropOrData("images").length),1)):g("v-if",!0),c("div",{class:d(["press-image-preview__close-icon",`press-image-preview__close-icon--${e.getPropOrData("closeIconPosition")}`]),onClick:s[0]||(s[0]=h(((...e)=>o.onClose&&o.onClose(...e)),["stop"]))},[e.getPropOrData("closeable")?(r(),n(_,{key:0,name:e.getPropOrData("closeIcon")},null,8,["name"])):g("v-if",!0)],2),u(k,{class:"press-image-preview__swipe",current:i.active,onChange:o.onChange},{default:l((()=>[(r(!0),p(w,null,v(e.getPropOrData("images"),((e,s)=>(r(),n(I,{key:s,class:"press-image-preview__swipe-item",onClick:o.onClickSwiperItem},{default:l((()=>[c("div",{class:"press-image-preview__image-wrap"},[c("img",{class:"press-image-preview__image",src:e,fit:"contain"},null,8,["src"])])])),_:2},1032,["onClick"])))),128))])),_:1},8,["current","onChange"]),c("div")],6)])),_:1},8,["show","custom-style","onClick"])}],["__scopeId","data-v-2f0fad06"]]);function S(s){let t;return s.selector||(t=_(O,"pressImagePreview"),t.mode="functional"),e({...s,dialog:t,show:!0,showFunction:"showImagePreview"})}const D=S;export{O as I,S as a,D as i};
