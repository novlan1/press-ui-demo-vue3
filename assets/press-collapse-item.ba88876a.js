import{d as e,a as t}from"./press-component.d8ea5855.js";import{P as s,C as a}from"./relation.25345683.js";import{d as i}from"./parent-map.dcad3672.js";import{_ as l,o as n,c as o,m as r,n as d,l as c,d as p,w as m,e as u,p as h,j as f}from"./index-38a6aa88.js";import{P as y}from"./press-cell.331e86fe.js";import{r as g}from"./system.3ebd09ca.js";import{b}from"./rect.515f795d.js";import{u as x}from"./utils.527a09c0.js";const C=l({name:"PressCollapse",options:{...e},mixins:[s(i)],props:{value:{type:[Array,String],default:()=>[]},accordion:{type:Boolean,default:!1},border:{type:Boolean,default:!0},...t},watch:{value:{handler(){this.updateExpanded()}},accordion:{handler(){this.updateExpanded()}}},created(){this.children=[]},methods:{updateExpanded(){this.children.forEach((e=>{e.updateExpanded()}))},switch(e,t){const{accordion:s,value:a}=this,i=e;e=s?t?e:"":t?(a||[]).concat(e):(a||[]).filter((t=>t!==e)),t?this.$emit("open",i):this.$emit("close",i),this.$emit("change",e),this.$emit("input",e)}}},[["render",function(e,t,s,a,i,l){return n(),o("div",{class:d(e.customClass+" press-collapse "+(s.border?"press-hairline--top-bottom":""))},[r(e.$slots,"default")],2)}]]);function v({height:e,duration:t}){return[`height: ${e};`,`transition: height ${t}ms ease-in-out 0ms, top ${t}ms ease-in-out 0ms, -webkit-transform ${t}ms ease-in-out 0ms, transform ${t}ms ease-in-out 0ms;`,"transform-origin: 50% 50% 0px;"].join("")}function S(e,t,s){b(e,".press-collapse-item__content").then((e=>e.height)).then((a=>{!function(e,t,s,a){if(t){if(0===a){const t=0;e.animationStyle=v({height:"auto",duration:t})}else{const t=s?300:1;e.animationStyle=v({height:`${a}px`,duration:t}),setTimeout((()=>{e.animationStyle=v({height:"auto",duration:0})}),t)}return}e.animationStyle=v({height:`${a}px`,duration:1}),g((()=>{e.animationStyle=v({height:0,duration:300})}))}(e,t,s,a)}))}const $=l({name:"PressCollapseItem",options:{...e,styleIsolation:"shared"},components:{PressCell:y},mixins:[a(i)],props:{size:{type:String,default:""},name:{type:String,default:""},title:{type:String,default:""},value:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},border:{type:Boolean,default:!0},isLink:{type:Boolean,default:!0},titleClass:{type:String,default:""},contentClass:{type:String,default:""},...t},emits:[],data:()=>({expanded:!1,animation:{},mounted:!1,animationStyle:"height: 0;"}),computed:{collapseItemClass(){const{disabled:e,expanded:t}=this;return x.bem2("collapse-item__title",{disabled:e,expanded:t})},collapseItemCustomClass:()=>"",wrapperClass:()=>x.bem2("collapse-item__wrapper")},mounted(){this.updateExpanded(),this.mounted=!0},methods:{updateExpanded(){if(!this[i])return;const{value:e,accordion:t}=this[i],{children:s=[]}=this[i],{name:a}=this,l=s.indexOf(this),n=null==a?l:a,o=t?e===n:(e||[]).some((e=>e===n));o!==this.expanded&&S(this,o,this.mounted),this.expanded=o},onClick(){if(this.disabled)return;const{name:e,expanded:t}=this,s=this[i].children.indexOf(this),a=null==e?s:e;this[i].switch(a,!t)}}},[["render",function(e,t,s,a,i,l){const y=f("press-cell");return n(),o("div",{class:d(e.customClass+" press-collapse-item "+(0!==e.index?"press-hairline--top":""))},[c(" 【修改点】cell增加center，垂直居中 "),p(y,{size:s.size,title:s.title,"title-class":s.titleClass,icon:s.icon,value:s.value,label:s.label,"is-link":s.isLink,clickable:s.clickable,border:s.border&&i.expanded,class:d(l.collapseItemClass),"custom-class":l.collapseItemCustomClass,"hover-class":"press-cell--hover",center:"",onClick:l.onClick},{title:m((()=>[r(e.$slots,"title",{},void 0,!0)])),"right-icon":m((()=>[r(e.$slots,"right-icon",{},void 0,!0)])),default:m((()=>[r(e.$slots,"value",{},void 0,!0)])),_:3},8,["size","title","title-class","icon","value","label","is-link","clickable","border","class","custom-class","onClick"]),u("div",{class:d(l.wrapperClass),style:h(i.animationStyle)},[u("div",{class:d(["press-collapse-item__content",s.contentClass])},[r(e.$slots,"default",{},void 0,!0)],2)],6)],2)}],["__scopeId","data-v-1fc5ed4a"]]);export{C as P,$ as a};
