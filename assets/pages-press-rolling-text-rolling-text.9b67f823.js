import{b as t}from"./utils.dccf1609.js";import{_ as e,z as r,u as s,v as l,o as i,c as a,a as o,F as n,k as u,n as m,b as d,t as g,f as p,e as h,P as c,i as y,j as f,h as x}from"./index-3d521a22.js";import{P as b,a as T}from"./press-grid-item.71599302.js";import"./relation.8b10893c.js";import"./parent-map.7daf54ee.js";const S={name:"PressRollingTextItem",options:{styleIsolation:"shared"},props:{customClass:{type:String,default:""},direction:{type:String,default:"down"},figureArr:{type:Array,default:()=>[]},height:{type:Number,default:40},delay:{type:Number,default:0},isStart:{type:Boolean,default:!1},duration:{type:Number,default:2}},data:()=>({utils:r}),computed:{newFigureArr(){return"down"===this.direction?this.figureArr.slice().reverse():this.figureArr},translatePx(){return`-${this.height*(this.figureArr.length-1)}px`},itemStyle(){return s({lineHeight:l(this.height)})},rootStyle(){return s({height:l(this.height),"--press-translate":this.translatePx,"--press-duration":`${this.duration}s`,"--press-delay":`${this.delay}s`})}},mounted(){},methods:{}};const C={name:"PressRollingText",options:{styleIsolation:"shared"},components:{PressRollingTextItem:e(S,[["render",function(t,e,r,s,l,p){return i(),a("div",{class:m([l.utils.bem2("rolling-text-item",[r.direction]),r.customClass]),style:d(p.rootStyle)},[o("div",{class:m(l.utils.bem2("rolling-text-item__box",{animate:r.isStart}))},[(i(!0),a(n,null,u(p.newFigureArr,((t,e)=>(i(),a("div",{key:e,class:m([l.utils.bem2("rolling-text-item__item",{last:e===p.newFigureArr.length-1})]),style:d(p.itemStyle)},g(t),7)))),128))],2)],6)}],["__scopeId","data-v-4a0c3408"]])},props:{customClass:{type:String,default:""},itemCustomClass:{type:String,default:""},startNum:{type:Number,default:0},targetNum:{type:Number,default:0},textList:{type:Array,default:()=>[]},duration:{type:Number,default:2},direction:{type:String,default:"down"},autoStart:{type:Boolean,default:!0},stopOrder:{type:String,default:"ltr"},height:{type:Number,default:40}},data(){return{rolling:this.autoStart}},computed:{isCustomType(){return Array.isArray(this.textList)&&this.textList.length},itemLength(){return this.isCustomType?this.textList[0].length:`${Math.max(this.startNum,this.targetNum)}`.length},targetNumArr(){return this.isCustomType?new Array(this.itemLength).fill(""):t(this.targetNum,this.itemLength).split("")},startNumArr(){return t(this.startNum,this.itemLength).split("")}},watch:{autoStart:{handler(t){t&&this.start()}}},mounted(){},methods:{getTextArrByIdx(t){const e=[];for(let r=0;r<this.textList.length;r++)e.push(this.textList[r][t]);return e},getFigureArr(t){const e=+this.startNumArr[t],r=+this.targetNumArr[t],s=[];for(let l=e;l<=9;l++)s.push(l);for(let l=0;l<=2;l++)for(let t=0;t<=9;t++)s.push(t);for(let l=0;l<=r;l++)s.push(l);return s},getDelay(t,e){return"ltr"===this.stopOrder?.2*t:.2*(e-1-t)},start(){this.rolling=!0},reset(){this.rolling=!1,this.autoStart&&setTimeout((()=>{this.start()}),300)}}};const N=["aaaaa","bbbbb","ccccc","ddddd","eeeee","fffff","ggggg"];const _=e({i18n:{"zh-CN":{direction:"设置翻滚方向",stopOrder:"设置各数位停止顺序",rollDown:"向下翻滚",rollUp:"向上翻滚",stopFrom:"从个位停止",manualControl:"手动控制",customStyle:"自定义样式",noNumberType:"翻转非数字内容",start:"开始",reset:"重置"},"en-US":{direction:"Set Rolling Direction",stopOrder:"Set Stop Order",rollDown:"Roll Down",rollUp:"Roll Up",stopFrom:"Right Side Stop First",manualControl:"Manual Control",customStyle:"Custom Style",noNumberType:"Roll Non-numeric Text",start:"Start",reset:"Reset"}},components:{PressRollingText:e(C,[["render",function(t,e,r,s,l,o){const d=h("PressRollingTextItem");return i(),a("div",{class:m(["press-rolling-text",r.customClass])},[(i(!0),a(n,null,u(o.targetNumArr,((t,e)=>(i(),p(d,{key:e,"figure-arr":o.isCustomType?o.getTextArrByIdx(e):o.getFigureArr(e),duration:r.duration,direction:r.direction,"is-start":l.rolling,height:r.height,delay:o.getDelay(e,o.itemLength),"custom-class":r.itemCustomClass},null,8,["figure-arr","duration","direction","is-start","height","delay","custom-class"])))),128))],2)}],["__scopeId","data-v-4134700b"]]),PressButton:c,PressGrid:b,PressGridItem:T},data:()=>({textList:N}),methods:{startRoll(t){this.$refs[t].reset(),setTimeout((()=>{this.$refs[t].start()}))},start(){this.$refs.rollingText6.start()},reset(){this.$refs.rollingText6.reset()}}},[["render",function(t,e,r,s,l,n){const u=h("PressRollingText"),m=h("PressButton"),d=h("demo-block"),p=h("PressGridItem"),c=h("PressGrid");return i(),a("div",{class:"demo-wrap"},[y(d,{title:t.t("basicUsage")},{default:f((()=>[y(u,{ref:"rollingText","start-num":0,"target-num":123,"auto-start":!1},null,512),o("div",{class:"button-wrap"},[y(m,{type:"primary",size:"small",onClick:e[0]||(e[0]=t=>n.startRoll("rollingText"))},{default:f((()=>[x(g(t.t("rollDown")),1)])),_:1})])])),_:1},8,["title"]),y(d,{title:t.t("direction")},{default:f((()=>[y(u,{ref:"rollingText2","start-num":0,"target-num":432,direction:"up","auto-start":!1},null,512),o("div",{class:"button-wrap"},[y(m,{type:"primary",size:"small",onClick:e[1]||(e[1]=t=>n.startRoll("rollingText2"))},{default:f((()=>[x(g(t.t("rollUp")),1)])),_:1})])])),_:1},8,["title"]),y(d,{title:t.t("stopOrder")},{default:f((()=>[y(u,{ref:"rollingText3","start-num":0,"target-num":54321,"auto-start":!1,"stop-order":"rtl"},null,512),o("div",{class:"button-wrap"},[y(m,{type:"primary",size:"small",onClick:e[2]||(e[2]=t=>n.startRoll("rollingText3"))},{default:f((()=>[x(g(t.t("stopFrom")),1)])),_:1})])])),_:1},8,["title"]),y(d,{title:t.t("noNumberType")},{default:f((()=>[y(u,{ref:"rollingText4","text-list":l.textList,"auto-start":!1,duration:1},null,8,["text-list"]),o("div",{class:"button-wrap"},[y(m,{type:"primary",size:"small",onClick:e[3]||(e[3]=t=>n.startRoll("rollingText4"))},{default:f((()=>[x(g(t.t("start")),1)])),_:1})])])),_:1},8,["title"]),y(d,{title:t.t("customStyle")},{default:f((()=>[y(u,{ref:"rollingText5","custom-class":"my-rolling-text",height:54,"start-num":12345,"target-num":54321},null,512)])),_:1},8,["title"]),y(d,{title:t.t("manualControl")},{default:f((()=>[y(u,{ref:"rollingText6",height:54,"custom-class":"my-rolling-text","start-num":0,"target-num":54321,"auto-start":!1},null,512)])),_:1},8,["title"]),y(c,{clickable:"","custom-class":"grid-wrap","column-num":2},{default:f((()=>[y(p,{text:t.t("start"),icon:"play-circle-o",onClick:n.start},null,8,["text","onClick"]),y(p,{text:t.t("reset"),icon:"replay",onClick:n.reset},null,8,["text","onClick"])])),_:1})])}],["__scopeId","data-v-bb9d6010"]]);export{_ as default};
