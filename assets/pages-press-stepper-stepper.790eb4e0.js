import{E as e,G as t,_ as n,K as s,a2 as a,a3 as i,W as l,o as u,c as o,e as r,J as h,C as c,A as d,k as p,d as g,U as m,M as b,a as C,w as v,l as f}from"./index-95b0f20a.js";const y={buttonStyle:function(n){return e({width:t(n.buttonSize),height:t(n.buttonSize)})},inputStyle:function(n){return e({width:t(n.inputWidth),height:t(n.buttonSize)})}};function S(e,t){return String(e)===String(t)}const T=n({i18n:{"zh-CN":{step:"步长设置",range:"限制输入范围",integer:"限制输入整数",roundTheme:"圆角风格",asyncChange:"异步变更",customSize:"自定义大小",disableInput:"禁用输入框",decimalLength:"固定小数位数",closeLongPress:"关闭长按"},"en-US":{step:"Step",range:"Range",integer:"Integer",roundTheme:"Round Theme",asyncChange:"Async Change",customSize:"Custom Size",disableInput:"Disable Input",decimalLength:"Decimal Length",closeLongPress:"Close Long Press"}},components:{PressStepper:n({name:"PressStepper",field:!0,props:{value:{type:[Number,String],default:0},integer:{type:Boolean},disabled:Boolean,inputWidth:{type:String,default:""},buttonSize:{type:String,default:""},asyncChange:Boolean,disableInput:Boolean,decimalLength:{type:Number,default:0},min:{type:Number,default:1},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},showPlus:{type:Boolean,default:!0},showMinus:{type:Boolean,default:!0},disablePlus:Boolean,disableMinus:Boolean,longPress:{type:Boolean,default:!0},theme:{type:String,default:""},alwaysEmbed:Boolean,customClass:{type:String,default:""},inputClass:{type:String,default:""},minusClass:{type:String,default:""},plusClass:{type:String,default:""}},emits:["focus","blur","change","overlimit","minus","plus"],data:()=>({currentValue:"",focus:!1,utils:s,computed:y}),watch:{value:{handler(){this.observeValue()}},integer:{handler(){this.check()}},decimalLength:{handler(){this.check()}},min:{handler(){this.check()}},max:{handler(){this.check()}}},created(){this.currentValue=this.format(this.value)},methods:{observeValue(){const{value:e,currentValue:t}=this;S(e,t)||(this.currentValue=this.format(e))},check(){const e=this.format(this.currentValue);S(e,this.currentValue)||(this.currentValue=e)},isDisabled(e){const{disabled:t,disablePlus:n,disableMinus:s,currentValue:a,max:i,min:l}=this;return"plus"===e?t||n||a>=i:t||s||a<=l},onFocus(e){this.$emit("focus",a(e))},onBlur(e){const t=this.format(i(e));this.emitChange(t),this.$emit("blur",Object.assign(Object.assign({},a(e)),{value:t}))},filter(e){return e=String(e).replace(/[^0-9.-]/g,""),this.integer&&-1!==e.indexOf(".")&&(e=e.split(".")[0]),e},format(e){return e=""===(e=this.filter(e))?0:+e,e=Math.max(Math.min(this.max,e),this.min),l(this.decimalLength)&&(e=e.toFixed(this.decimalLength)),e},onInput(e){const t=i(e);if(""===t)return;let n=this.filter(t);if(l(this.decimalLength)&&-1!==n.indexOf(".")){const e=n.split(".");n=`${e[0]}.${e[1].slice(0,this.decimalLength)}`}this.emitChange(n)},emitChange(e){this.asyncChange||(this.currentValue=e),this.$emit("change",e)},onChange(){const{type:e}=this;if(this.isDisabled(e))return void this.$emit("overlimit",e);const t="minus"===e?-this.step:+this.step,n=this.format(function(e,t){const n=Math.pow(10,10);return Math.round((e+t)*n)/n}(+this.currentValue,t));this.emitChange(n),this.$emit(e)},longPressStep(){this.longPressTimer=setTimeout((()=>{this.onChange(),this.longPressStep()}),200)},onTap(e){const{type:t}=e.currentTarget.dataset;this.type=t,this.onChange()},onTouchStart(e){if(!this.longPress)return;clearTimeout(this.longPressTimer);const{type:t}=e.currentTarget.dataset;this.type=t,this.isLongPress=!1,this.longPressTimer=setTimeout((()=>{this.isLongPress=!0,this.onChange(),this.longPressStep()}),600)},onTouchEnd(){this.longPress&&clearTimeout(this.longPressTimer)}}},[["render",function(e,t,n,s,a,i){const l=m;return u(),o("div",{class:"press-stepper-index"},[r("div",{class:c([a.utils.bem2("stepper",[n.theme]),n.customClass])},[n.showMinus?(u(),o("div",{key:0,"data-type":"minus",style:h(""+a.computed.buttonStyle({buttonSize:n.buttonSize})),class:c([n.minusClass,a.utils.bem2("stepper__minus",{disabled:n.disabled||n.disableMinus||a.currentValue<=n.min})]),"hover-class":"press-stepper__minus--hover","hover-stay-time":"70",onClick:t[0]||(t[0]=(...e)=>i.onTap&&i.onTap(...e)),onTouchstart:t[1]||(t[1]=(...e)=>i.onTouchStart&&i.onTouchStart(...e)),onTouchend:t[2]||(t[2]=(...e)=>i.onTouchEnd&&i.onTouchEnd(...e))},[d(e.$slots,"minus",{},void 0,!0)],38)):p("v-if",!0),g(l,{"always-embed":!1,type:n.integer?"number":"digit",class:c(n.inputClass+" "+a.utils.bem2("stepper__input",{disabled:n.disabled||n.disableInput})),style:h(""+a.computed.inputStyle({buttonSize:n.buttonSize,inputWidth:n.inputWidth})),value:a.currentValue,focus:a.focus,disabled:n.disabled||n.disableInput,onInput:i.onInput,onFocus:i.onFocus,onBlur:i.onBlur},null,8,["type","class","style","value","focus","disabled","onInput","onFocus","onBlur"]),n.showPlus?(u(),o("div",{key:1,"data-type":"plus",style:h(""+a.computed.buttonStyle({buttonSize:n.buttonSize})),class:c(n.plusClass+" "+a.utils.bem2("stepper__plus",{disabled:n.disabled||n.disablePlus||a.currentValue>=n.max})),"hover-class":"press-stepper__plus--hover","hover-stay-time":"70",onClick:t[3]||(t[3]=(...e)=>i.onTap&&i.onTap(...e)),onTouchstart:t[4]||(t[4]=(...e)=>i.onTouchStart&&i.onTouchStart(...e)),onTouchend:t[5]||(t[5]=(...e)=>i.onTouchEnd&&i.onTouchEnd(...e))},[d(e.$slots,"plus",{},void 0,!0)],38)):p("v-if",!0)],2)])}],["__scopeId","data-v-e6dccb2d"]]),PressToast:b,PressCell:C},data:()=>({value:1,asyncValue:1}),methods:{onChange(e){console.log("onChange.val",e)},onSyncChange(e){this.$toast.loading({duration:1e3}),setTimeout((()=>{console.log("onSyncChange.val",e),this.asyncValue=e}),1e3)}}},[["render",function(e,t,n,s,a,i){const l=f("press-stepper"),r=f("press-cell");return u(),o("div",{class:"demo-wrap"},[g(r,{title:e.t("basicUsage")},{default:v((()=>[g(l,{value:a.value,onChange:i.onChange},null,8,["value","onChange"])])),_:1},8,["title"]),g(r,{title:e.t("step")},{default:v((()=>[g(l,{value:a.value,step:2,onChange:i.onChange},null,8,["value","onChange"])])),_:1},8,["title"]),g(r,{title:e.t("range")},{default:v((()=>[g(l,{value:a.value,min:5,max:8,onChange:i.onChange},null,8,["value","onChange"])])),_:1},8,["title"]),g(r,{title:e.t("integer")},{default:v((()=>[g(l,{value:a.value,integer:"",onChange:i.onChange},null,8,["value","onChange"])])),_:1},8,["title"]),g(r,{title:e.t("disabled")},{default:v((()=>[g(l,{disabled:"",value:a.value,onChange:i.onChange},null,8,["value","onChange"])])),_:1},8,["title"]),g(r,{title:e.t("closeLongPress")},{default:v((()=>[g(l,{"long-press":!1,value:a.value,onChange:i.onChange},null,8,["value","onChange"])])),_:1},8,["title"]),g(r,{title:e.t("decimalLength")},{default:v((()=>[g(l,{step:.2,"decimal-length":1,value:a.value,onChange:i.onChange},null,8,["step","value","onChange"])])),_:1},8,["title"]),g(r,{title:e.t("asyncChange")},{default:v((()=>[g(l,{"async-change":"",value:a.asyncValue,onChange:i.onSyncChange},null,8,["value","onChange"])])),_:1},8,["title"]),g(r,{title:e.t("customSize")},{default:v((()=>[g(l,{"input-width":"40px","button-size":"32px",value:a.value,onChange:i.onChange},null,8,["value","onChange"])])),_:1},8,["title"])])}]]);export{T as default};
